{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/lib/semantic-ui/definitions/behaviors/visibility.js","filenameRelative":"/client/lib/semantic-ui/definitions/behaviors/visibility.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/lib/semantic-ui/definitions/behaviors/visibility.js.map","sourceFileName":"/client/lib/semantic-ui/definitions/behaviors/visibility.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"visibility"},"ignored":false,"code":"/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/ /*!\n    * # Semantic UI - Visibility\n    * http://github.com/semantic-org/semantic-ui/\n    *\n    *\n    * Released under the MIT license\n    * http://opensource.org/licenses/MIT\n    *\n    */;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.visibility = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue,\n        moduleCount = $allModules.length,\n        loadedCount = 0;\n    $allModules.each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.visibility.settings, parameters) : $.extend({}, $.fn.visibility.settings),\n          className = settings.className,\n          namespace = settings.namespace,\n          error = settings.error,\n          metadata = settings.metadata,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = 'module-' + namespace,\n          $window = $(window),\n          $module = $(this),\n          $context = $(settings.context),\n          $placeholder,\n          selector = $module.selector || '',\n          instance = $module.data(moduleNamespace),\n          requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n        setTimeout(callback, 0);\n      },\n          element = this,\n          disabled = false,\n          contextObserver,\n          observer,\n          module;\n\n      module = {\n        initialize: function () {\n          module.debug('Initializing', settings);\n          module.setup.cache();\n\n          if (module.should.trackChanges()) {\n            if (settings.type == 'image') {\n              module.setup.image();\n            }\n\n            if (settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if (settings.observeChanges) {\n              module.observeChanges();\n            }\n\n            module.bind.events();\n          }\n\n          module.save.position();\n\n          if (!module.is.visible()) {\n            module.error(error.visible, $module);\n          }\n\n          if (settings.initialCheck) {\n            module.checkVisibility();\n          }\n\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.debug('Storing instance', module);\n          $module.data(moduleNamespace, module);\n          instance = module;\n        },\n        destroy: function () {\n          module.verbose('Destroying previous module');\n\n          if (observer) {\n            observer.disconnect();\n          }\n\n          if (contextObserver) {\n            contextObserver.disconnect();\n          }\n\n          $window.off('load' + eventNamespace, module.event.load).off('resize' + eventNamespace, module.event.resize);\n          $context.off('scroll' + eventNamespace, module.event.scroll).off('scrollchange' + eventNamespace, module.event.scrollchange);\n\n          if (settings.type == 'fixed') {\n            module.resetFixed();\n            module.remove.placeholder();\n          }\n\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n        observeChanges: function () {\n          if ('MutationObserver' in window) {\n            contextObserver = new MutationObserver(module.event.contextChanged);\n            observer = new MutationObserver(module.event.changed);\n            contextObserver.observe(document, {\n              childList: true,\n              subtree: true\n            });\n            observer.observe(element, {\n              childList: true,\n              subtree: true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n        bind: {\n          events: function () {\n            module.verbose('Binding visibility events to scroll and resize');\n\n            if (settings.refreshOnLoad) {\n              $window.on('load' + eventNamespace, module.event.load);\n            }\n\n            $window.on('resize' + eventNamespace, module.event.resize); // pub/sub pattern\n\n            $context.off('scroll' + eventNamespace).on('scroll' + eventNamespace, module.event.scroll).on('scrollchange' + eventNamespace, module.event.scrollchange);\n          }\n        },\n        event: {\n          changed: function (mutations) {\n            module.verbose('DOM tree modified, updating visibility calculations');\n            module.timer = setTimeout(function () {\n              module.verbose('DOM tree modified, updating sticky menu');\n              module.refresh();\n            }, 100);\n          },\n          contextChanged: function (mutations) {\n            [].forEach.call(mutations, function (mutation) {\n              if (mutation.removedNodes) {\n                [].forEach.call(mutation.removedNodes, function (node) {\n                  if (node == element || $(node).find(element).length > 0) {\n                    module.debug('Element removed from DOM, tearing down events');\n                    module.destroy();\n                  }\n                });\n              }\n            });\n          },\n          resize: function () {\n            module.debug('Window resized');\n\n            if (settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function () {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function () {\n            if (settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              }, settings.throttle);\n            } else {\n              requestAnimationFrame(function () {\n                $context.triggerHandler('scrollchange' + eventNamespace, [$context.scrollTop()]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function (event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          }\n        },\n        precache: function (images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n\n          var imagesLength = images.length,\n              loadedCounter = 0,\n              cache = [],\n              cacheImage = document.createElement('img'),\n              handleLoad = function () {\n            loadedCounter++;\n\n            if (loadedCounter >= images.length) {\n              if ($.isFunction(callback)) {\n                callback();\n              }\n            }\n          };\n\n          while (imagesLength--) {\n            cacheImage = document.createElement('img');\n            cacheImage.onload = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n        enableCallbacks: function () {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n        disableCallbacks: function () {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n        should: {\n          trackChanges: function () {\n            if (methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n        setup: {\n          cache: function () {\n            module.cache = {\n              occurred: {},\n              screen: {},\n              element: {}\n            };\n          },\n          image: function () {\n            var src = $module.data(metadata.src);\n\n            if (src) {\n              module.verbose('Lazy loading image', src);\n              settings.once = true;\n              settings.observeChanges = false; // show when top visible\n\n              settings.onOnScreen = function () {\n                module.debug('Image on screen', element);\n                module.precache(src, function () {\n                  module.set.image(src, function () {\n                    loadedCount++;\n\n                    if (loadedCount == moduleCount) {\n                      settings.onAllLoaded.call(this);\n                    }\n\n                    settings.onLoad.call(this);\n                  });\n                });\n              };\n            }\n          },\n          fixed: function () {\n            module.debug('Setting up fixed');\n            settings.once = false;\n            settings.observeChanges = false;\n            settings.initialCheck = true;\n            settings.refreshOnLoad = true;\n\n            if (!parameters.transition) {\n              settings.transition = false;\n            }\n\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n\n            settings.onTopPassed = function () {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n\n              if (settings.transition) {\n                if ($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n\n            settings.onTopPassedReverse = function () {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n        create: {\n          placeholder: function () {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module.clone(false).css('display', 'none').addClass(className.placeholder).insertAfter($module);\n          }\n        },\n        show: {\n          placeholder: function () {\n            module.verbose('Showing placeholder');\n            $placeholder.css('display', 'block').css('visibility', 'hidden');\n          }\n        },\n        hide: {\n          placeholder: function () {\n            module.verbose('Hiding placeholder');\n            $placeholder.css('display', 'none').css('visibility', '');\n          }\n        },\n        set: {\n          fixed: function () {\n            module.verbose('Setting element to fixed position');\n            $module.addClass(className.fixed).css({\n              position: 'fixed',\n              top: settings.offset + 'px',\n              left: 'auto',\n              zIndex: settings.zIndex\n            });\n            settings.onFixed.call(element);\n          },\n          image: function (src, callback) {\n            $module.attr('src', src);\n\n            if (settings.transition) {\n              if ($.fn.transition !== undefined) {\n                $module.transition(settings.transition, settings.duration, callback);\n              } else {\n                $module.fadeIn(settings.duration, callback);\n              }\n            } else {\n              $module.show();\n            }\n          }\n        },\n        is: {\n          onScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.onScreen;\n          },\n          offScreen: function () {\n            var calculations = module.get.elementCalculations();\n            return calculations.offScreen;\n          },\n          visible: function () {\n            if (module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n\n            return false;\n          }\n        },\n        refresh: function () {\n          module.debug('Refreshing constants (width/height)');\n\n          if (settings.type == 'fixed') {\n            module.resetFixed();\n          }\n\n          module.reset();\n          module.save.position();\n\n          if (settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n\n          settings.onRefresh.call(element);\n        },\n        resetFixed: function () {\n          module.remove.fixed();\n          module.remove.occurred();\n        },\n        reset: function () {\n          module.verbose('Resetting all cached values');\n\n          if ($.isPlainObject(module.cache)) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n        checkVisibility: function (scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if (!disabled && module.is.visible()) {\n            // save scroll position\n            module.save.scroll(scroll); // update calculations derived from scroll\n\n            module.save.calculations(); // percentage\n\n            module.passed(); // reverse (must be first)\n\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse(); // one time\n\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed(); // on update callback\n\n            if (settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n        passed: function (amount, newCallback) {\n          var calculations = module.get.elementCalculations(),\n              amountInPixels; // assign callback\n\n          if (amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          } else if (amount !== undefined) {\n            return module.get.pixelsPassed(amount) > calculations.pixelsPassed;\n          } else if (calculations.passing) {\n            $.each(settings.onPassed, function (amount, callback) {\n              if (calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              } else if (!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n        onScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOnScreen,\n              callbackName = 'onScreen';\n\n          if (newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n\n          if (calculations.onScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n        offScreen: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onOffScreen,\n              callbackName = 'offScreen';\n\n          if (newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n\n          if (calculations.offScreen) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n        passing: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassing,\n              callbackName = 'passing';\n\n          if (newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n\n          if (calculations.passing) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n        topVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisible,\n              callbackName = 'topVisible';\n\n          if (newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n\n          if (calculations.topVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n        bottomVisible: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisible,\n              callbackName = 'bottomVisible';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n\n          if (calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n        topPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassed,\n              callbackName = 'topPassed';\n\n          if (newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n\n          if (calculations.topPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n        bottomPassed: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassed,\n              callbackName = 'bottomPassed';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n\n          if (calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n        passingReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onPassingReverse,\n              callbackName = 'passingReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n\n          if (!calculations.passing) {\n            if (module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n        topVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopVisibleReverse,\n              callbackName = 'topVisibleReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n\n          if (!calculations.topVisible) {\n            if (module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n        bottomVisibleReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomVisibleReverse,\n              callbackName = 'bottomVisibleReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n\n          if (!calculations.bottomVisible) {\n            if (module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n        topPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onTopPassedReverse,\n              callbackName = 'topPassedReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n\n          if (!calculations.topPassed) {\n            if (module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n        bottomPassedReverse: function (newCallback) {\n          var calculations = module.get.elementCalculations(),\n              callback = newCallback || settings.onBottomPassedReverse,\n              callbackName = 'bottomPassedReverse';\n\n          if (newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n\n          if (!calculations.bottomPassed) {\n            if (module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          } else if (!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n\n          if (newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n        execute: function (callback, callbackName) {\n          var calculations = module.get.elementCalculations(),\n              screen = module.get.screenCalculations();\n          callback = callback || false;\n\n          if (callback) {\n            if (settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            } else if (!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n\n          module.save.occurred(callbackName);\n        },\n        remove: {\n          fixed: function () {\n            module.debug('Removing fixed position');\n            $module.removeClass(className.fixed).css({\n              position: '',\n              top: '',\n              left: '',\n              zIndex: ''\n            });\n            settings.onUnfixed.call(element);\n          },\n          placeholder: function () {\n            module.debug('Removing placeholder content');\n\n            if ($placeholder) {\n              $placeholder.remove();\n            }\n          },\n          occurred: function (callback) {\n            if (callback) {\n              var occurred = module.cache.occurred;\n\n              if (occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            } else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n        save: {\n          calculations: function () {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function (callback) {\n            if (callback) {\n              if (module.cache.occurred[callback] === undefined || module.cache.occurred[callback] !== true) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function (scrollPosition) {\n            scrollPosition = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function () {\n            var scroll = module.get.scroll(),\n                lastScroll = module.get.lastScroll(),\n                direction;\n\n            if (scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            } else if (scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            } else {\n              direction = 'static';\n            }\n\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            var element = module.cache.element,\n                screen = module.get.screenSize();\n            module.verbose('Saving element position'); // (quicker than $.extend)\n\n            element.fits = element.height < screen.height;\n            element.offset = $module.offset();\n            element.width = $module.outerWidth();\n            element.height = $module.outerHeight(); // store\n\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function () {\n            var screen = module.get.screenCalculations(),\n                element = module.get.elementPosition(); // offset\n\n            if (settings.includeMargin) {\n              element.margin = {};\n              element.margin.top = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            } else {\n              element.top = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            } // visibility\n\n\n            element.topVisible = screen.bottom >= element.top;\n            element.topPassed = screen.top >= element.top;\n            element.bottomVisible = screen.bottom >= element.bottom;\n            element.bottomPassed = screen.top >= element.bottom;\n            element.pixelsPassed = 0;\n            element.percentagePassed = 0; // meta calculations\n\n            element.onScreen = element.topVisible && !element.bottomPassed;\n            element.passing = element.topPassed && !element.bottomPassed;\n            element.offScreen = !element.onScreen; // passing calculations\n\n            if (element.passing) {\n              element.pixelsPassed = screen.top - element.top;\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function () {\n            var scroll = module.get.scroll();\n            module.save.direction();\n            module.cache.screen.top = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function () {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n        get: {\n          pixelsPassed: function (amount) {\n            var element = module.get.elementCalculations();\n\n            if (amount.search('%') > -1) {\n              return element.height * (parseInt(amount, 10) / 100);\n            }\n\n            return parseInt(amount, 10);\n          },\n          occurred: function (callback) {\n            return module.cache.occurred !== undefined ? module.cache.occurred[callback] || false : false;\n          },\n          direction: function () {\n            if (module.cache.direction === undefined) {\n              module.save.direction();\n            }\n\n            return module.cache.direction;\n          },\n          elementPosition: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n\n            return module.cache.element;\n          },\n          elementCalculations: function () {\n            if (module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n\n            return module.cache.element;\n          },\n          screenCalculations: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n\n            return module.cache.screen;\n          },\n          screenSize: function () {\n            if (module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n\n            return module.cache.screen;\n          },\n          scroll: function () {\n            if (module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n\n            return module.cache.scroll;\n          },\n          lastScroll: function () {\n            if (module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n\n            return module.cache.screen.top;\n          }\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.visibility.settings = {\n    name: 'Visibility',\n    namespace: 'visibility',\n    debug: false,\n    verbose: false,\n    performance: true,\n    // whether to use mutation observers to follow changes\n    observeChanges: true,\n    // check position immediately on init\n    initialCheck: true,\n    // whether to refresh calculations after all page images load\n    refreshOnLoad: true,\n    // whether to refresh calculations after page resize event\n    refreshOnResize: true,\n    // should call callbacks on refresh event (resize, etc)\n    checkOnRefresh: true,\n    // callback should only occur one time\n    once: true,\n    // callback should fire continuously whe evaluates to true\n    continuous: false,\n    // offset to use with scroll top\n    offset: 0,\n    // whether to include margin in elements position\n    includeMargin: false,\n    // scroll context for visibility checks\n    context: window,\n    // visibility check delay in ms (defaults to animationFrame)\n    throttle: false,\n    // special visibility type (image, fixed)\n    type: false,\n    // z-index to use with visibility 'fixed'\n    zIndex: '10',\n    // image only animation settings\n    transition: 'fade in',\n    duration: 1000,\n    // array of callbacks for percentage\n    onPassed: {},\n    // standard callbacks\n    onOnScreen: false,\n    onOffScreen: false,\n    onPassing: false,\n    onTopVisible: false,\n    onBottomVisible: false,\n    onTopPassed: false,\n    onBottomPassed: false,\n    // reverse callbacks\n    onPassingReverse: false,\n    onTopVisibleReverse: false,\n    onBottomVisibleReverse: false,\n    onTopPassedReverse: false,\n    onBottomPassedReverse: false,\n    // special callbacks for image\n    onLoad: function () {},\n    onAllLoaded: function () {},\n    // special callbacks for fixed position\n    onFixed: function () {},\n    onUnfixed: function () {},\n    // utility callbacks\n    onUpdate: false,\n    // disabled by default for performance\n    onRefresh: function () {},\n    metadata: {\n      src: 'src'\n    },\n    className: {\n      fixed: 'fixed',\n      placeholder: 'placeholder'\n    },\n    error: {\n      method: 'The method you called is not defined.',\n      visible: 'Element is hidden, you must call refresh after element becomes visible'\n    }\n  };\n})(jQuery, window, document);","ast":null,"map":{"version":3,"sources":["/client/lib/semantic-ui/definitions/behaviors/visibility.js"],"names":["$","window","document","undefined","Math","self","Function","fn","visibility","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","moduleCount","length","loadedCount","each","settings","isPlainObject","extend","className","namespace","error","metadata","eventNamespace","moduleNamespace","$window","$module","$context","context","$placeholder","instance","data","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","element","disabled","contextObserver","observer","module","initialize","debug","setup","cache","should","trackChanges","type","image","fixed","observeChanges","bind","events","save","position","is","visible","initialCheck","checkVisibility","instantiate","destroy","verbose","disconnect","off","event","load","resize","scroll","scrollchange","resetFixed","remove","placeholder","removeData","MutationObserver","contextChanged","changed","observe","childList","subtree","refreshOnLoad","on","mutations","timer","refresh","forEach","mutation","removedNodes","node","find","refreshOnResize","throttle","clearTimeout","triggerHandler","scrollTop","scrollPosition","precache","images","Array","imagesLength","loadedCounter","cacheImage","createElement","handleLoad","isFunction","onload","onerror","src","push","enableCallbacks","disableCallbacks","occurred","screen","once","onOnScreen","set","onAllLoaded","onLoad","transition","create","onTopPassed","show","duration","onTopPassedReverse","hide","clone","css","addClass","insertAfter","top","offset","left","zIndex","onFixed","attr","fadeIn","onScreen","calculations","get","elementCalculations","offScreen","width","reset","checkOnRefresh","onRefresh","passed","passingReverse","topVisibleReverse","bottomVisibleReverse","topPassedReverse","bottomPassedReverse","passing","topVisible","bottomVisible","topPassed","bottomPassed","onUpdate","amount","newCallback","amountInPixels","onPassed","pixelsPassed","execute","callbackName","onOffScreen","onPassing","onTopVisible","onBottomVisible","onBottomPassed","onPassingReverse","onTopVisibleReverse","onBottomVisibleReverse","onBottomPassedReverse","screenCalculations","continuous","removeClass","onUnfixed","direction","lastScroll","elementPosition","screenSize","fits","height","outerWidth","outerHeight","includeMargin","margin","parseInt","bottom","percentagePassed","search","setting","name","value","internal","silent","log","prototype","console","info","apply","message","currentTime","executionTime","previousTime","display","title","totalTime","index","group","table","groupCollapsed","groupEnd","invoke","passedArguments","object","maxDepth","found","response","split","depth","camelCaseValue","charAt","toUpperCase","method","isArray","jQuery"],"mappings":"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","file":"/client/lib/semantic-ui/definitions/behaviors/visibility.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/\n/*!\n * # Semantic UI - Visibility\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n\"use strict\";\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.visibility = function(parameters) {\n  var\n    $allModules    = $(this),\n    moduleSelector = $allModules.selector || '',\n\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n    returnedValue,\n\n    moduleCount    = $allModules.length,\n    loadedCount    = 0\n  ;\n\n  $allModules\n    .each(function() {\n      var\n        settings        = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.visibility.settings, parameters)\n          : $.extend({}, $.fn.visibility.settings),\n\n        className       = settings.className,\n        namespace       = settings.namespace,\n        error           = settings.error,\n        metadata        = settings.metadata,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = 'module-' + namespace,\n\n        $window         = $(window),\n\n        $module         = $(this),\n        $context        = $(settings.context),\n\n        $placeholder,\n\n        selector        = $module.selector || '',\n        instance        = $module.data(moduleNamespace),\n\n        requestAnimationFrame = window.requestAnimationFrame\n          || window.mozRequestAnimationFrame\n          || window.webkitRequestAnimationFrame\n          || window.msRequestAnimationFrame\n          || function(callback) { setTimeout(callback, 0); },\n\n        element         = this,\n        disabled        = false,\n\n        contextObserver,\n        observer,\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.debug('Initializing', settings);\n\n          module.setup.cache();\n\n          if( module.should.trackChanges() ) {\n\n            if(settings.type == 'image') {\n              module.setup.image();\n            }\n            if(settings.type == 'fixed') {\n              module.setup.fixed();\n            }\n\n            if(settings.observeChanges) {\n              module.observeChanges();\n            }\n            module.bind.events();\n          }\n\n          module.save.position();\n          if( !module.is.visible() ) {\n            module.error(error.visible, $module);\n          }\n\n          if(settings.initialCheck) {\n            module.checkVisibility();\n          }\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.debug('Storing instance', module);\n          $module\n            .data(moduleNamespace, module)\n          ;\n          instance = module;\n        },\n\n        destroy: function() {\n          module.verbose('Destroying previous module');\n          if(observer) {\n            observer.disconnect();\n          }\n          if(contextObserver) {\n            contextObserver.disconnect();\n          }\n          $window\n            .off('load'   + eventNamespace, module.event.load)\n            .off('resize' + eventNamespace, module.event.resize)\n          ;\n          $context\n            .off('scroll'       + eventNamespace, module.event.scroll)\n            .off('scrollchange' + eventNamespace, module.event.scrollchange)\n          ;\n          if(settings.type == 'fixed') {\n            module.resetFixed();\n            module.remove.placeholder();\n          }\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            contextObserver = new MutationObserver(module.event.contextChanged);\n            observer        = new MutationObserver(module.event.changed);\n            contextObserver.observe(document, {\n              childList : true,\n              subtree   : true\n            });\n            observer.observe(element, {\n              childList : true,\n              subtree   : true\n            });\n            module.debug('Setting up mutation observer', observer);\n          }\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding visibility events to scroll and resize');\n            if(settings.refreshOnLoad) {\n              $window\n                .on('load'   + eventNamespace, module.event.load)\n              ;\n            }\n            $window\n              .on('resize' + eventNamespace, module.event.resize)\n            ;\n            // pub/sub pattern\n            $context\n              .off('scroll'      + eventNamespace)\n              .on('scroll'       + eventNamespace, module.event.scroll)\n              .on('scrollchange' + eventNamespace, module.event.scrollchange)\n            ;\n          }\n        },\n\n        event: {\n          changed: function(mutations) {\n            module.verbose('DOM tree modified, updating visibility calculations');\n            module.timer = setTimeout(function() {\n              module.verbose('DOM tree modified, updating sticky menu');\n              module.refresh();\n            }, 100);\n          },\n          contextChanged: function(mutations) {\n            [].forEach.call(mutations, function(mutation) {\n              if(mutation.removedNodes) {\n                [].forEach.call(mutation.removedNodes, function(node) {\n                  if(node == element || $(node).find(element).length > 0) {\n                    module.debug('Element removed from DOM, tearing down events');\n                    module.destroy();\n                  }\n                });\n              }\n            });\n          },\n          resize: function() {\n            module.debug('Window resized');\n            if(settings.refreshOnResize) {\n              requestAnimationFrame(module.refresh);\n            }\n          },\n          load: function() {\n            module.debug('Page finished loading');\n            requestAnimationFrame(module.refresh);\n          },\n          // publishes scrollchange event on one scroll\n          scroll: function() {\n            if(settings.throttle) {\n              clearTimeout(module.timer);\n              module.timer = setTimeout(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              }, settings.throttle);\n            }\n            else {\n              requestAnimationFrame(function() {\n                $context.triggerHandler('scrollchange' + eventNamespace, [ $context.scrollTop() ]);\n              });\n            }\n          },\n          // subscribes to scrollchange\n          scrollchange: function(event, scrollPosition) {\n            module.checkVisibility(scrollPosition);\n          },\n        },\n\n        precache: function(images, callback) {\n          if (!(images instanceof Array)) {\n            images = [images];\n          }\n          var\n            imagesLength  = images.length,\n            loadedCounter = 0,\n            cache         = [],\n            cacheImage    = document.createElement('img'),\n            handleLoad    = function() {\n              loadedCounter++;\n              if (loadedCounter >= images.length) {\n                if ($.isFunction(callback)) {\n                  callback();\n                }\n              }\n            }\n          ;\n          while (imagesLength--) {\n            cacheImage         = document.createElement('img');\n            cacheImage.onload  = handleLoad;\n            cacheImage.onerror = handleLoad;\n            cacheImage.src     = images[imagesLength];\n            cache.push(cacheImage);\n          }\n        },\n\n        enableCallbacks: function() {\n          module.debug('Allowing callbacks to occur');\n          disabled = false;\n        },\n\n        disableCallbacks: function() {\n          module.debug('Disabling all callbacks temporarily');\n          disabled = true;\n        },\n\n        should: {\n          trackChanges: function() {\n            if(methodInvoked) {\n              module.debug('One time query, no need to bind events');\n              return false;\n            }\n            module.debug('Callbacks being attached');\n            return true;\n          }\n        },\n\n        setup: {\n          cache: function() {\n            module.cache = {\n              occurred : {},\n              screen   : {},\n              element  : {},\n            };\n          },\n          image: function() {\n            var\n              src = $module.data(metadata.src)\n            ;\n            if(src) {\n              module.verbose('Lazy loading image', src);\n              settings.once           = true;\n              settings.observeChanges = false;\n\n              // show when top visible\n              settings.onOnScreen = function() {\n                module.debug('Image on screen', element);\n                module.precache(src, function() {\n                  module.set.image(src, function() {\n                    loadedCount++;\n                    if(loadedCount == moduleCount) {\n                      settings.onAllLoaded.call(this);\n                    }\n                    settings.onLoad.call(this);\n                  });\n                });\n              };\n            }\n          },\n          fixed: function() {\n            module.debug('Setting up fixed');\n            settings.once           = false;\n            settings.observeChanges = false;\n            settings.initialCheck   = true;\n            settings.refreshOnLoad  = true;\n            if(!parameters.transition) {\n              settings.transition = false;\n            }\n            module.create.placeholder();\n            module.debug('Added placeholder', $placeholder);\n            settings.onTopPassed = function() {\n              module.debug('Element passed, adding fixed position', $module);\n              module.show.placeholder();\n              module.set.fixed();\n              if(settings.transition) {\n                if($.fn.transition !== undefined) {\n                  $module.transition(settings.transition, settings.duration);\n                }\n              }\n            };\n            settings.onTopPassedReverse = function() {\n              module.debug('Element returned to position, removing fixed', $module);\n              module.hide.placeholder();\n              module.remove.fixed();\n            };\n          }\n        },\n\n        create: {\n          placeholder: function() {\n            module.verbose('Creating fixed position placeholder');\n            $placeholder = $module\n              .clone(false)\n              .css('display', 'none')\n              .addClass(className.placeholder)\n              .insertAfter($module)\n            ;\n          }\n        },\n\n        show: {\n          placeholder: function() {\n            module.verbose('Showing placeholder');\n            $placeholder\n              .css('display', 'block')\n              .css('visibility', 'hidden')\n            ;\n          }\n        },\n        hide: {\n          placeholder: function() {\n            module.verbose('Hiding placeholder');\n            $placeholder\n              .css('display', 'none')\n              .css('visibility', '')\n            ;\n          }\n        },\n\n        set: {\n          fixed: function() {\n            module.verbose('Setting element to fixed position');\n            $module\n              .addClass(className.fixed)\n              .css({\n                position : 'fixed',\n                top      : settings.offset + 'px',\n                left     : 'auto',\n                zIndex   : settings.zIndex\n              })\n            ;\n            settings.onFixed.call(element);\n          },\n          image: function(src, callback) {\n            $module\n              .attr('src', src)\n            ;\n            if(settings.transition) {\n              if( $.fn.transition !== undefined ) {\n                $module.transition(settings.transition, settings.duration, callback);\n              }\n              else {\n                $module.fadeIn(settings.duration, callback);\n              }\n            }\n            else {\n              $module.show();\n            }\n          }\n        },\n\n        is: {\n          onScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.onScreen;\n          },\n          offScreen: function() {\n            var\n              calculations   = module.get.elementCalculations()\n            ;\n            return calculations.offScreen;\n          },\n          visible: function() {\n            if(module.cache && module.cache.element) {\n              return !(module.cache.element.width === 0 && module.cache.element.offset.top === 0);\n            }\n            return false;\n          }\n        },\n\n        refresh: function() {\n          module.debug('Refreshing constants (width/height)');\n          if(settings.type == 'fixed') {\n            module.resetFixed();\n          }\n          module.reset();\n          module.save.position();\n          if(settings.checkOnRefresh) {\n            module.checkVisibility();\n          }\n          settings.onRefresh.call(element);\n        },\n\n        resetFixed: function () {\n          module.remove.fixed();\n          module.remove.occurred();\n        },\n\n        reset: function() {\n          module.verbose('Resetting all cached values');\n          if( $.isPlainObject(module.cache) ) {\n            module.cache.screen = {};\n            module.cache.element = {};\n          }\n        },\n\n        checkVisibility: function(scroll) {\n          module.verbose('Checking visibility of element', module.cache.element);\n\n          if( !disabled && module.is.visible() ) {\n\n            // save scroll position\n            module.save.scroll(scroll);\n\n            // update calculations derived from scroll\n            module.save.calculations();\n\n            // percentage\n            module.passed();\n\n            // reverse (must be first)\n            module.passingReverse();\n            module.topVisibleReverse();\n            module.bottomVisibleReverse();\n            module.topPassedReverse();\n            module.bottomPassedReverse();\n\n            // one time\n            module.onScreen();\n            module.offScreen();\n            module.passing();\n            module.topVisible();\n            module.bottomVisible();\n            module.topPassed();\n            module.bottomPassed();\n\n            // on update callback\n            if(settings.onUpdate) {\n              settings.onUpdate.call(element, module.get.elementCalculations());\n            }\n          }\n        },\n\n        passed: function(amount, newCallback) {\n          var\n            calculations   = module.get.elementCalculations(),\n            amountInPixels\n          ;\n          // assign callback\n          if(amount && newCallback) {\n            settings.onPassed[amount] = newCallback;\n          }\n          else if(amount !== undefined) {\n            return (module.get.pixelsPassed(amount) > calculations.pixelsPassed);\n          }\n          else if(calculations.passing) {\n            $.each(settings.onPassed, function(amount, callback) {\n              if(calculations.bottomVisible || calculations.pixelsPassed > module.get.pixelsPassed(amount)) {\n                module.execute(callback, amount);\n              }\n              else if(!settings.once) {\n                module.remove.occurred(callback);\n              }\n            });\n          }\n        },\n\n        onScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOnScreen,\n            callbackName = 'onScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for onScreen', newCallback);\n            settings.onOnScreen = newCallback;\n          }\n          if(calculations.onScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOnScreen;\n          }\n        },\n\n        offScreen: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onOffScreen,\n            callbackName = 'offScreen'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for offScreen', newCallback);\n            settings.onOffScreen = newCallback;\n          }\n          if(calculations.offScreen) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.onOffScreen;\n          }\n        },\n\n        passing: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassing,\n            callbackName = 'passing'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing', newCallback);\n            settings.onPassing = newCallback;\n          }\n          if(calculations.passing) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return calculations.passing;\n          }\n        },\n\n\n        topVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisible,\n            callbackName = 'topVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible', newCallback);\n            settings.onTopVisible = newCallback;\n          }\n          if(calculations.topVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topVisible;\n          }\n        },\n\n        bottomVisible: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisible,\n            callbackName = 'bottomVisible'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible', newCallback);\n            settings.onBottomVisible = newCallback;\n          }\n          if(calculations.bottomVisible) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomVisible;\n          }\n        },\n\n        topPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassed,\n            callbackName = 'topPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed', newCallback);\n            settings.onTopPassed = newCallback;\n          }\n          if(calculations.topPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.topPassed;\n          }\n        },\n\n        bottomPassed: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassed,\n            callbackName = 'bottomPassed'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed', newCallback);\n            settings.onBottomPassed = newCallback;\n          }\n          if(calculations.bottomPassed) {\n            module.execute(callback, callbackName);\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return calculations.bottomPassed;\n          }\n        },\n\n        passingReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onPassingReverse,\n            callbackName = 'passingReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for passing reverse', newCallback);\n            settings.onPassingReverse = newCallback;\n          }\n          if(!calculations.passing) {\n            if(module.get.occurred('passing')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback !== undefined) {\n            return !calculations.passing;\n          }\n        },\n\n\n        topVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopVisibleReverse,\n            callbackName = 'topVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top visible reverse', newCallback);\n            settings.onTopVisibleReverse = newCallback;\n          }\n          if(!calculations.topVisible) {\n            if(module.get.occurred('topVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.topVisible;\n          }\n        },\n\n        bottomVisibleReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomVisibleReverse,\n            callbackName = 'bottomVisibleReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom visible reverse', newCallback);\n            settings.onBottomVisibleReverse = newCallback;\n          }\n          if(!calculations.bottomVisible) {\n            if(module.get.occurred('bottomVisible')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomVisible;\n          }\n        },\n\n        topPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onTopPassedReverse,\n            callbackName = 'topPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for top passed reverse', newCallback);\n            settings.onTopPassedReverse = newCallback;\n          }\n          if(!calculations.topPassed) {\n            if(module.get.occurred('topPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.onTopPassed;\n          }\n        },\n\n        bottomPassedReverse: function(newCallback) {\n          var\n            calculations = module.get.elementCalculations(),\n            callback     = newCallback || settings.onBottomPassedReverse,\n            callbackName = 'bottomPassedReverse'\n          ;\n          if(newCallback) {\n            module.debug('Adding callback for bottom passed reverse', newCallback);\n            settings.onBottomPassedReverse = newCallback;\n          }\n          if(!calculations.bottomPassed) {\n            if(module.get.occurred('bottomPassed')) {\n              module.execute(callback, callbackName);\n            }\n          }\n          else if(!settings.once) {\n            module.remove.occurred(callbackName);\n          }\n          if(newCallback === undefined) {\n            return !calculations.bottomPassed;\n          }\n        },\n\n        execute: function(callback, callbackName) {\n          var\n            calculations = module.get.elementCalculations(),\n            screen       = module.get.screenCalculations()\n          ;\n          callback = callback || false;\n          if(callback) {\n            if(settings.continuous) {\n              module.debug('Callback being called continuously', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n            else if(!module.get.occurred(callbackName)) {\n              module.debug('Conditions met', callbackName, calculations);\n              callback.call(element, calculations, screen);\n            }\n          }\n          module.save.occurred(callbackName);\n        },\n\n        remove: {\n          fixed: function() {\n            module.debug('Removing fixed position');\n            $module\n              .removeClass(className.fixed)\n              .css({\n                position : '',\n                top      : '',\n                left     : '',\n                zIndex   : ''\n              })\n            ;\n            settings.onUnfixed.call(element);\n          },\n          placeholder: function() {\n            module.debug('Removing placeholder content');\n            if($placeholder) {\n              $placeholder.remove();\n            }\n          },\n          occurred: function(callback) {\n            if(callback) {\n              var\n                occurred = module.cache.occurred\n              ;\n              if(occurred[callback] !== undefined && occurred[callback] === true) {\n                module.debug('Callback can now be called again', callback);\n                module.cache.occurred[callback] = false;\n              }\n            }\n            else {\n              module.cache.occurred = {};\n            }\n          }\n        },\n\n        save: {\n          calculations: function() {\n            module.verbose('Saving all calculations necessary to determine positioning');\n            module.save.direction();\n            module.save.screenCalculations();\n            module.save.elementCalculations();\n          },\n          occurred: function(callback) {\n            if(callback) {\n              if(module.cache.occurred[callback] === undefined || (module.cache.occurred[callback] !== true)) {\n                module.verbose('Saving callback occurred', callback);\n                module.cache.occurred[callback] = true;\n              }\n            }\n          },\n          scroll: function(scrollPosition) {\n            scrollPosition      = scrollPosition + settings.offset || $context.scrollTop() + settings.offset;\n            module.cache.scroll = scrollPosition;\n          },\n          direction: function() {\n            var\n              scroll     = module.get.scroll(),\n              lastScroll = module.get.lastScroll(),\n              direction\n            ;\n            if(scroll > lastScroll && lastScroll) {\n              direction = 'down';\n            }\n            else if(scroll < lastScroll && lastScroll) {\n              direction = 'up';\n            }\n            else {\n              direction = 'static';\n            }\n            module.cache.direction = direction;\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            var\n              element = module.cache.element,\n              screen  = module.get.screenSize()\n            ;\n            module.verbose('Saving element position');\n            // (quicker than $.extend)\n            element.fits          = (element.height < screen.height);\n            element.offset        = $module.offset();\n            element.width         = $module.outerWidth();\n            element.height        = $module.outerHeight();\n            // store\n            module.cache.element = element;\n            return element;\n          },\n          elementCalculations: function() {\n            var\n              screen     = module.get.screenCalculations(),\n              element    = module.get.elementPosition()\n            ;\n            // offset\n            if(settings.includeMargin) {\n              element.margin        = {};\n              element.margin.top    = parseInt($module.css('margin-top'), 10);\n              element.margin.bottom = parseInt($module.css('margin-bottom'), 10);\n              element.top    = element.offset.top - element.margin.top;\n              element.bottom = element.offset.top + element.height + element.margin.bottom;\n            }\n            else {\n              element.top    = element.offset.top;\n              element.bottom = element.offset.top + element.height;\n            }\n\n            // visibility\n            element.topVisible       = (screen.bottom >= element.top);\n            element.topPassed        = (screen.top >= element.top);\n            element.bottomVisible    = (screen.bottom >= element.bottom);\n            element.bottomPassed     = (screen.top >= element.bottom);\n            element.pixelsPassed     = 0;\n            element.percentagePassed = 0;\n\n            // meta calculations\n            element.onScreen  = (element.topVisible && !element.bottomPassed);\n            element.passing   = (element.topPassed && !element.bottomPassed);\n            element.offScreen = (!element.onScreen);\n\n            // passing calculations\n            if(element.passing) {\n              element.pixelsPassed     = (screen.top - element.top);\n              element.percentagePassed = (screen.top - element.top) / element.height;\n            }\n            module.cache.element = element;\n            module.verbose('Updated element calculations', element);\n            return element;\n          },\n          screenCalculations: function() {\n            var\n              scroll = module.get.scroll()\n            ;\n            module.save.direction();\n            module.cache.screen.top    = scroll;\n            module.cache.screen.bottom = scroll + module.cache.screen.height;\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            module.verbose('Saving window position');\n            module.cache.screen = {\n              height: $context.height()\n            };\n          },\n          position: function() {\n            module.save.screenSize();\n            module.save.elementPosition();\n          }\n        },\n\n        get: {\n          pixelsPassed: function(amount) {\n            var\n              element = module.get.elementCalculations()\n            ;\n            if(amount.search('%') > -1) {\n              return ( element.height * (parseInt(amount, 10) / 100) );\n            }\n            return parseInt(amount, 10);\n          },\n          occurred: function(callback) {\n            return (module.cache.occurred !== undefined)\n              ? module.cache.occurred[callback] || false\n              : false\n            ;\n          },\n          direction: function() {\n            if(module.cache.direction === undefined) {\n              module.save.direction();\n            }\n            return module.cache.direction;\n          },\n          elementPosition: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementPosition();\n            }\n            return module.cache.element;\n          },\n          elementCalculations: function() {\n            if(module.cache.element === undefined) {\n              module.save.elementCalculations();\n            }\n            return module.cache.element;\n          },\n          screenCalculations: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenCalculations();\n            }\n            return module.cache.screen;\n          },\n          screenSize: function() {\n            if(module.cache.screen === undefined) {\n              module.save.screenSize();\n            }\n            return module.cache.screen;\n          },\n          scroll: function() {\n            if(module.cache.scroll === undefined) {\n              module.save.scroll();\n            }\n            return module.cache.scroll;\n          },\n          lastScroll: function() {\n            if(module.cache.screen === undefined) {\n              module.debug('First scroll event, no last scroll could be found');\n              return false;\n            }\n            return module.cache.screen.top;\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                module.error(error.method, query);\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        instance.save.scroll();\n        instance.save.calculations();\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.visibility.settings = {\n\n  name                   : 'Visibility',\n  namespace              : 'visibility',\n\n  debug                  : false,\n  verbose                : false,\n  performance            : true,\n\n  // whether to use mutation observers to follow changes\n  observeChanges         : true,\n\n  // check position immediately on init\n  initialCheck           : true,\n\n  // whether to refresh calculations after all page images load\n  refreshOnLoad          : true,\n\n  // whether to refresh calculations after page resize event\n  refreshOnResize        : true,\n\n  // should call callbacks on refresh event (resize, etc)\n  checkOnRefresh         : true,\n\n  // callback should only occur one time\n  once                   : true,\n\n  // callback should fire continuously whe evaluates to true\n  continuous             : false,\n\n  // offset to use with scroll top\n  offset                 : 0,\n\n  // whether to include margin in elements position\n  includeMargin          : false,\n\n  // scroll context for visibility checks\n  context                : window,\n\n  // visibility check delay in ms (defaults to animationFrame)\n  throttle               : false,\n\n  // special visibility type (image, fixed)\n  type                   : false,\n\n  // z-index to use with visibility 'fixed'\n  zIndex                 : '10',\n\n  // image only animation settings\n  transition             : 'fade in',\n  duration               : 1000,\n\n  // array of callbacks for percentage\n  onPassed               : {},\n\n  // standard callbacks\n  onOnScreen             : false,\n  onOffScreen            : false,\n  onPassing              : false,\n  onTopVisible           : false,\n  onBottomVisible        : false,\n  onTopPassed            : false,\n  onBottomPassed         : false,\n\n  // reverse callbacks\n  onPassingReverse       : false,\n  onTopVisibleReverse    : false,\n  onBottomVisibleReverse : false,\n  onTopPassedReverse     : false,\n  onBottomPassedReverse  : false,\n\n  // special callbacks for image\n  onLoad                 : function() {},\n  onAllLoaded            : function() {},\n\n  // special callbacks for fixed position\n  onFixed                : function() {},\n  onUnfixed              : function() {},\n\n  // utility callbacks\n  onUpdate               : false, // disabled by default for performance\n  onRefresh              : function(){},\n\n  metadata : {\n    src: 'src'\n  },\n\n  className: {\n    fixed       : 'fixed',\n    placeholder : 'placeholder'\n  },\n\n  error : {\n    method  : 'The method you called is not defined.',\n    visible : 'Element is hidden, you must call refresh after element becomes visible'\n  }\n\n};\n\n})( jQuery, window, document );\n"]},"hash":"9193385dca8587a4e952d089f299d1543d7b5d42"}
