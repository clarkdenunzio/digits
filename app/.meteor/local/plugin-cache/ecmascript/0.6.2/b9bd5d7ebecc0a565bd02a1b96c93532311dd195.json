{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/lib/semantic-ui/definitions/modules/popup.js","filenameRelative":"/client/lib/semantic-ui/definitions/modules/popup.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/lib/semantic-ui/definitions/modules/popup.js.map","sourceFileName":"/client/lib/semantic-ui/definitions/modules/popup.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"popup"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/ /*!\n    * # Semantic UI - Popup\n    * http://github.com/semantic-org/semantic-ui/\n    *\n    *\n    * Released under the MIT license\n    * http://opensource.org/licenses/MIT\n    *\n    */;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.popup = function (parameters) {\n    var $allModules = $(this),\n        $document = $(document),\n        $window = $(window),\n        $body = $('body'),\n        moduleSelector = $allModules.selector || '',\n        hasTouch = true,\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $allModules.each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.popup.settings, parameters) : $.extend({}, $.fn.popup.settings),\n          selector = settings.selector,\n          className = settings.className,\n          error = settings.error,\n          metadata = settings.metadata,\n          namespace = settings.namespace,\n          eventNamespace = '.' + settings.namespace,\n          moduleNamespace = 'module-' + namespace,\n          $module = $(this),\n          $context = $(settings.context),\n          $scrollContext = $(settings.scrollContext),\n          $boundary = $(settings.boundary),\n          $target = settings.target ? $(settings.target) : $module,\n          $popup,\n          $offsetParent,\n          searchDepth = 0,\n          triedPositions = false,\n          openedWithTouch = false,\n          element = this,\n          instance = $module.data(moduleNamespace),\n          documentObserver,\n          elementNamespace,\n          id,\n          module;\n      module = {\n        // binds events\n        initialize: function () {\n          module.debug('Initializing', $module);\n          module.createID();\n          module.bind.events();\n\n          if (!module.exists() && settings.preserve) {\n            module.create();\n          }\n\n          module.observeChanges();\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.verbose('Storing instance', module);\n          instance = module;\n          $module.data(moduleNamespace, instance);\n        },\n        observeChanges: function () {\n          if ('MutationObserver' in window) {\n            documentObserver = new MutationObserver(module.event.documentChanged);\n            documentObserver.observe(document, {\n              childList: true,\n              subtree: true\n            });\n            module.debug('Setting up mutation observer', documentObserver);\n          }\n        },\n        refresh: function () {\n          if (settings.popup) {\n            $popup = $(settings.popup).eq(0);\n          } else {\n            if (settings.inline) {\n              $popup = $target.nextAll(selector.popup).eq(0);\n              settings.popup = $popup;\n            }\n          }\n\n          if (settings.popup) {\n            $popup.addClass(className.loading);\n            $offsetParent = module.get.offsetParent();\n            $popup.removeClass(className.loading);\n\n            if (settings.movePopup && module.has.popup() && module.get.offsetParent($popup)[0] !== $offsetParent[0]) {\n              module.debug('Moving popup to the same offset parent as activating element');\n              $popup.detach().appendTo($offsetParent);\n            }\n          } else {\n            $offsetParent = settings.inline ? module.get.offsetParent($target) : module.has.popup() ? module.get.offsetParent($popup) : $body;\n          }\n\n          if ($offsetParent.is('html') && $offsetParent[0] !== $body[0]) {\n            module.debug('Setting page as offset parent');\n            $offsetParent = $body;\n          }\n\n          if (module.get.variation()) {\n            module.set.variation();\n          }\n        },\n        reposition: function () {\n          module.refresh();\n          module.set.position();\n        },\n        destroy: function () {\n          module.debug('Destroying previous module');\n\n          if (documentObserver) {\n            documentObserver.disconnect();\n          } // remove element only if was created dynamically\n\n\n          if ($popup && !settings.preserve) {\n            module.removePopup();\n          } // clear all timeouts\n\n\n          clearTimeout(module.hideTimer);\n          clearTimeout(module.showTimer); // remove events\n\n          module.unbind.close();\n          module.unbind.events();\n          $module.removeData(moduleNamespace);\n        },\n        event: {\n          start: function (event) {\n            var delay = $.isPlainObject(settings.delay) ? settings.delay.show : settings.delay;\n            clearTimeout(module.hideTimer);\n\n            if (!openedWithTouch) {\n              module.showTimer = setTimeout(module.show, delay);\n            }\n          },\n          end: function () {\n            var delay = $.isPlainObject(settings.delay) ? settings.delay.hide : settings.delay;\n            clearTimeout(module.showTimer);\n            module.hideTimer = setTimeout(module.hide, delay);\n          },\n          touchstart: function (event) {\n            openedWithTouch = true;\n            module.show();\n          },\n          resize: function () {\n            if (module.is.visible()) {\n              module.set.position();\n            }\n          },\n          documentChanged: function (mutations) {\n            [].forEach.call(mutations, function (mutation) {\n              if (mutation.removedNodes) {\n                [].forEach.call(mutation.removedNodes, function (node) {\n                  if (node == element || $(node).find(element).length > 0) {\n                    module.debug('Element removed from DOM, tearing down events');\n                    module.destroy();\n                  }\n                });\n              }\n            });\n          },\n          hideGracefully: function (event) {\n            var $target = $(event.target),\n                isInDOM = $.contains(document.documentElement, event.target),\n                inPopup = $target.closest(selector.popup).length > 0; // don't close on clicks inside popup\n\n            if (event && !inPopup && isInDOM) {\n              module.debug('Click occurred outside popup hiding popup');\n              module.hide();\n            } else {\n              module.debug('Click was inside popup, keeping popup open');\n            }\n          }\n        },\n        // generates popup html from metadata\n        create: function () {\n          var html = module.get.html(),\n              title = module.get.title(),\n              content = module.get.content();\n\n          if (html || content || title) {\n            module.debug('Creating pop-up html');\n\n            if (!html) {\n              html = settings.templates.popup({\n                title: title,\n                content: content\n              });\n            }\n\n            $popup = $('<div/>').addClass(className.popup).data(metadata.activator, $module).html(html);\n\n            if (settings.inline) {\n              module.verbose('Inserting popup element inline', $popup);\n              $popup.insertAfter($module);\n            } else {\n              module.verbose('Appending popup element to body', $popup);\n              $popup.appendTo($context);\n            }\n\n            module.refresh();\n            module.set.variation();\n\n            if (settings.hoverable) {\n              module.bind.popup();\n            }\n\n            settings.onCreate.call($popup, element);\n          } else if ($target.next(selector.popup).length !== 0) {\n            module.verbose('Pre-existing popup found');\n            settings.inline = true;\n            settings.popup = $target.next(selector.popup).data(metadata.activator, $module);\n            module.refresh();\n\n            if (settings.hoverable) {\n              module.bind.popup();\n            }\n          } else if (settings.popup) {\n            $(settings.popup).data(metadata.activator, $module);\n            module.verbose('Used popup specified in settings');\n            module.refresh();\n\n            if (settings.hoverable) {\n              module.bind.popup();\n            }\n          } else {\n            module.debug('No content specified skipping display', element);\n          }\n        },\n        createID: function () {\n          id = (Math.random().toString(16) + '000000000').substr(2, 8);\n          elementNamespace = '.' + id;\n          module.verbose('Creating unique id for element', id);\n        },\n        // determines popup state\n        toggle: function () {\n          module.debug('Toggling pop-up');\n\n          if (module.is.hidden()) {\n            module.debug('Popup is hidden, showing pop-up');\n            module.unbind.close();\n            module.show();\n          } else {\n            module.debug('Popup is visible, hiding pop-up');\n            module.hide();\n          }\n        },\n        show: function (callback) {\n          callback = callback || function () {};\n\n          module.debug('Showing pop-up', settings.transition);\n\n          if (module.is.hidden() && !(module.is.active() && module.is.dropdown())) {\n            if (!module.exists()) {\n              module.create();\n            }\n\n            if (settings.onShow.call($popup, element) === false) {\n              module.debug('onShow callback returned false, cancelling popup animation');\n              return;\n            } else if (!settings.preserve && !settings.popup) {\n              module.refresh();\n            }\n\n            if ($popup && module.set.position()) {\n              module.save.conditions();\n\n              if (settings.exclusive) {\n                module.hideAll();\n              }\n\n              module.animate.show(callback);\n            }\n          }\n        },\n        hide: function (callback) {\n          callback = callback || function () {};\n\n          if (module.is.visible() || module.is.animating()) {\n            if (settings.onHide.call($popup, element) === false) {\n              module.debug('onHide callback returned false, cancelling popup animation');\n              return;\n            }\n\n            module.remove.visible();\n            module.unbind.close();\n            module.restore.conditions();\n            module.animate.hide(callback);\n          }\n        },\n        hideAll: function () {\n          $(selector.popup).filter('.' + className.visible).each(function () {\n            $(this).data(metadata.activator).popup('hide');\n          });\n        },\n        exists: function () {\n          if (!$popup) {\n            return false;\n          }\n\n          if (settings.inline || settings.popup) {\n            return module.has.popup();\n          } else {\n            return $popup.closest($context).length >= 1 ? true : false;\n          }\n        },\n        removePopup: function () {\n          if (module.has.popup() && !settings.popup) {\n            module.debug('Removing popup', $popup);\n            $popup.remove();\n            $popup = undefined;\n            settings.onRemove.call($popup, element);\n          }\n        },\n        save: {\n          conditions: function () {\n            module.cache = {\n              title: $module.attr('title')\n            };\n\n            if (module.cache.title) {\n              $module.removeAttr('title');\n            }\n\n            module.verbose('Saving original attributes', module.cache.title);\n          }\n        },\n        restore: {\n          conditions: function () {\n            if (module.cache && module.cache.title) {\n              $module.attr('title', module.cache.title);\n              module.verbose('Restoring original attributes', module.cache.title);\n            }\n\n            return true;\n          }\n        },\n        supports: {\n          svg: function () {\n            return (typeof SVGGraphicsElement === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(SVGGraphicsElement)) === undefined;\n          }\n        },\n        animate: {\n          show: function (callback) {\n            callback = $.isFunction(callback) ? callback : function () {};\n\n            if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n              module.set.visible();\n              $popup.transition({\n                animation: settings.transition + ' in',\n                queue: false,\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                onComplete: function () {\n                  module.bind.close();\n                  callback.call($popup, element);\n                  settings.onVisible.call($popup, element);\n                }\n              });\n            } else {\n              module.error(error.noTransition);\n            }\n          },\n          hide: function (callback) {\n            callback = $.isFunction(callback) ? callback : function () {};\n            module.debug('Hiding pop-up');\n\n            if (settings.onHide.call($popup, element) === false) {\n              module.debug('onHide callback returned false, cancelling popup animation');\n              return;\n            }\n\n            if (settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n              $popup.transition({\n                animation: settings.transition + ' out',\n                queue: false,\n                duration: settings.duration,\n                debug: settings.debug,\n                verbose: settings.verbose,\n                onComplete: function () {\n                  module.reset();\n                  callback.call($popup, element);\n                  settings.onHidden.call($popup, element);\n                }\n              });\n            } else {\n              module.error(error.noTransition);\n            }\n          }\n        },\n        change: {\n          content: function (html) {\n            $popup.html(html);\n          }\n        },\n        get: {\n          html: function () {\n            $module.removeData(metadata.html);\n            return $module.data(metadata.html) || settings.html;\n          },\n          title: function () {\n            $module.removeData(metadata.title);\n            return $module.data(metadata.title) || settings.title;\n          },\n          content: function () {\n            $module.removeData(metadata.content);\n            return $module.data(metadata.content) || $module.attr('title') || settings.content;\n          },\n          variation: function () {\n            $module.removeData(metadata.variation);\n            return $module.data(metadata.variation) || settings.variation;\n          },\n          popup: function () {\n            return $popup;\n          },\n          popupOffset: function () {\n            return $popup.offset();\n          },\n          calculations: function () {\n            var targetElement = $target[0],\n                isWindow = $boundary[0] == window,\n                targetPosition = settings.inline || settings.popup && settings.movePopup ? $target.position() : $target.offset(),\n                screenPosition = isWindow ? {\n              top: 0,\n              left: 0\n            } : $boundary.offset(),\n                calculations = {},\n                scroll = isWindow ? {\n              top: $window.scrollTop(),\n              left: $window.scrollLeft()\n            } : {\n              top: 0,\n              left: 0\n            },\n                screen;\n            calculations = {\n              // element which is launching popup\n              target: {\n                element: $target[0],\n                width: $target.outerWidth(),\n                height: $target.outerHeight(),\n                top: targetPosition.top,\n                left: targetPosition.left,\n                margin: {}\n              },\n              // popup itself\n              popup: {\n                width: $popup.outerWidth(),\n                height: $popup.outerHeight()\n              },\n              // offset container (or 3d context)\n              parent: {\n                width: $offsetParent.outerWidth(),\n                height: $offsetParent.outerHeight()\n              },\n              // screen boundaries\n              screen: {\n                top: screenPosition.top,\n                left: screenPosition.left,\n                scroll: {\n                  top: scroll.top,\n                  left: scroll.left\n                },\n                width: $boundary.width(),\n                height: $boundary.height()\n              }\n            }; // add in container calcs if fluid\n\n            if (settings.setFluidWidth && module.is.fluid()) {\n              calculations.container = {\n                width: $popup.parent().outerWidth()\n              };\n              calculations.popup.width = calculations.container.width;\n            } // add in margins if inline\n\n\n            calculations.target.margin.top = settings.inline ? parseInt(window.getComputedStyle(targetElement).getPropertyValue('margin-top'), 10) : 0;\n            calculations.target.margin.left = settings.inline ? module.is.rtl() ? parseInt(window.getComputedStyle(targetElement).getPropertyValue('margin-right'), 10) : parseInt(window.getComputedStyle(targetElement).getPropertyValue('margin-left'), 10) : 0; // calculate screen boundaries\n\n            screen = calculations.screen;\n            calculations.boundary = {\n              top: screen.top + screen.scroll.top,\n              bottom: screen.top + screen.scroll.top + screen.height,\n              left: screen.left + screen.scroll.left,\n              right: screen.left + screen.scroll.left + screen.width\n            };\n            return calculations;\n          },\n          id: function () {\n            return id;\n          },\n          startEvent: function () {\n            if (settings.on == 'hover') {\n              return 'mouseenter';\n            } else if (settings.on == 'focus') {\n              return 'focus';\n            }\n\n            return false;\n          },\n          scrollEvent: function () {\n            return 'scroll';\n          },\n          endEvent: function () {\n            if (settings.on == 'hover') {\n              return 'mouseleave';\n            } else if (settings.on == 'focus') {\n              return 'blur';\n            }\n\n            return false;\n          },\n          distanceFromBoundary: function (offset, calculations) {\n            var distanceFromBoundary = {},\n                popup,\n                boundary;\n            calculations = calculations || module.get.calculations(); // shorthand\n\n            popup = calculations.popup;\n            boundary = calculations.boundary;\n\n            if (offset) {\n              distanceFromBoundary = {\n                top: offset.top - boundary.top,\n                left: offset.left - boundary.left,\n                right: boundary.right - (offset.left + popup.width),\n                bottom: boundary.bottom - (offset.top + popup.height)\n              };\n              module.verbose('Distance from boundaries determined', offset, distanceFromBoundary);\n            }\n\n            return distanceFromBoundary;\n          },\n          offsetParent: function ($target) {\n            var element = $target !== undefined ? $target[0] : $module[0],\n                parentNode = element.parentNode,\n                $node = $(parentNode);\n\n            if (parentNode) {\n              var is2D = $node.css('transform') === 'none',\n                  isStatic = $node.css('position') === 'static',\n                  isHTML = $node.is('html');\n\n              while (parentNode && !isHTML && isStatic && is2D) {\n                parentNode = parentNode.parentNode;\n                $node = $(parentNode);\n                is2D = $node.css('transform') === 'none';\n                isStatic = $node.css('position') === 'static';\n                isHTML = $node.is('html');\n              }\n            }\n\n            return $node && $node.length > 0 ? $node : $();\n          },\n          positions: function () {\n            return {\n              'top left': false,\n              'top center': false,\n              'top right': false,\n              'bottom left': false,\n              'bottom center': false,\n              'bottom right': false,\n              'left center': false,\n              'right center': false\n            };\n          },\n          nextPosition: function (position) {\n            var positions = position.split(' '),\n                verticalPosition = positions[0],\n                horizontalPosition = positions[1],\n                opposite = {\n              top: 'bottom',\n              bottom: 'top',\n              left: 'right',\n              right: 'left'\n            },\n                adjacent = {\n              left: 'center',\n              center: 'right',\n              right: 'left'\n            },\n                backup = {\n              'top left': 'top center',\n              'top center': 'top right',\n              'top right': 'right center',\n              'right center': 'bottom right',\n              'bottom right': 'bottom center',\n              'bottom center': 'bottom left',\n              'bottom left': 'left center',\n              'left center': 'top left'\n            },\n                adjacentsAvailable = verticalPosition == 'top' || verticalPosition == 'bottom',\n                oppositeTried = false,\n                adjacentTried = false,\n                nextPosition = false;\n\n            if (!triedPositions) {\n              module.verbose('All available positions available');\n              triedPositions = module.get.positions();\n            }\n\n            module.debug('Recording last position tried', position);\n            triedPositions[position] = true;\n\n            if (settings.prefer === 'opposite') {\n              nextPosition = [opposite[verticalPosition], horizontalPosition];\n              nextPosition = nextPosition.join(' ');\n              oppositeTried = triedPositions[nextPosition] === true;\n              module.debug('Trying opposite strategy', nextPosition);\n            }\n\n            if (settings.prefer === 'adjacent' && adjacentsAvailable) {\n              nextPosition = [verticalPosition, adjacent[horizontalPosition]];\n              nextPosition = nextPosition.join(' ');\n              adjacentTried = triedPositions[nextPosition] === true;\n              module.debug('Trying adjacent strategy', nextPosition);\n            }\n\n            if (adjacentTried || oppositeTried) {\n              module.debug('Using backup position', nextPosition);\n              nextPosition = backup[position];\n            }\n\n            return nextPosition;\n          }\n        },\n        set: {\n          position: function (position, calculations) {\n            // exit conditions\n            if ($target.length === 0 || $popup.length === 0) {\n              module.error(error.notFound);\n              return;\n            }\n\n            var offset, distanceAway, target, popup, parent, positioning, popupOffset, distanceFromBoundary;\n            calculations = calculations || module.get.calculations();\n            position = position || $module.data(metadata.position) || settings.position;\n            offset = $module.data(metadata.offset) || settings.offset;\n            distanceAway = settings.distanceAway; // shorthand\n\n            target = calculations.target;\n            popup = calculations.popup;\n            parent = calculations.parent;\n\n            if (target.width === 0 && target.height === 0 && !module.is.svg(target.element)) {\n              module.debug('Popup target is hidden, no action taken');\n              return false;\n            }\n\n            if (settings.inline) {\n              module.debug('Adding margin to calculation', target.margin);\n\n              if (position == 'left center' || position == 'right center') {\n                offset += target.margin.top;\n                distanceAway += -target.margin.left;\n              } else if (position == 'top left' || position == 'top center' || position == 'top right') {\n                offset += target.margin.left;\n                distanceAway -= target.margin.top;\n              } else {\n                offset += target.margin.left;\n                distanceAway += target.margin.top;\n              }\n            }\n\n            module.debug('Determining popup position from calculations', position, calculations);\n\n            if (module.is.rtl()) {\n              position = position.replace(/left|right/g, function (match) {\n                return match == 'left' ? 'right' : 'left';\n              });\n              module.debug('RTL: Popup position updated', position);\n            } // if last attempt use specified last resort position\n\n\n            if (searchDepth == settings.maxSearchDepth && typeof settings.lastResort === 'string') {\n              position = settings.lastResort;\n            }\n\n            switch (position) {\n              case 'top left':\n                positioning = {\n                  top: 'auto',\n                  bottom: parent.height - target.top + distanceAway,\n                  left: target.left + offset,\n                  right: 'auto'\n                };\n                break;\n\n              case 'top center':\n                positioning = {\n                  bottom: parent.height - target.top + distanceAway,\n                  left: target.left + target.width / 2 - popup.width / 2 + offset,\n                  top: 'auto',\n                  right: 'auto'\n                };\n                break;\n\n              case 'top right':\n                positioning = {\n                  bottom: parent.height - target.top + distanceAway,\n                  right: parent.width - target.left - target.width - offset,\n                  top: 'auto',\n                  left: 'auto'\n                };\n                break;\n\n              case 'left center':\n                positioning = {\n                  top: target.top + target.height / 2 - popup.height / 2 + offset,\n                  right: parent.width - target.left + distanceAway,\n                  left: 'auto',\n                  bottom: 'auto'\n                };\n                break;\n\n              case 'right center':\n                positioning = {\n                  top: target.top + target.height / 2 - popup.height / 2 + offset,\n                  left: target.left + target.width + distanceAway,\n                  bottom: 'auto',\n                  right: 'auto'\n                };\n                break;\n\n              case 'bottom left':\n                positioning = {\n                  top: target.top + target.height + distanceAway,\n                  left: target.left + offset,\n                  bottom: 'auto',\n                  right: 'auto'\n                };\n                break;\n\n              case 'bottom center':\n                positioning = {\n                  top: target.top + target.height + distanceAway,\n                  left: target.left + target.width / 2 - popup.width / 2 + offset,\n                  bottom: 'auto',\n                  right: 'auto'\n                };\n                break;\n\n              case 'bottom right':\n                positioning = {\n                  top: target.top + target.height + distanceAway,\n                  right: parent.width - target.left - target.width - offset,\n                  left: 'auto',\n                  bottom: 'auto'\n                };\n                break;\n            }\n\n            if (positioning === undefined) {\n              module.error(error.invalidPosition, position);\n            }\n\n            module.debug('Calculated popup positioning values', positioning); // tentatively place on stage\n\n            $popup.css(positioning).removeClass(className.position).addClass(position).addClass(className.loading);\n            popupOffset = module.get.popupOffset(); // see if any boundaries are surpassed with this tentative position\n\n            distanceFromBoundary = module.get.distanceFromBoundary(popupOffset, calculations);\n\n            if (module.is.offstage(distanceFromBoundary, position)) {\n              module.debug('Position is outside viewport', position);\n\n              if (searchDepth < settings.maxSearchDepth) {\n                searchDepth++;\n                position = module.get.nextPosition(position);\n                module.debug('Trying new position', position);\n                return $popup ? module.set.position(position, calculations) : false;\n              } else {\n                if (settings.lastResort) {\n                  module.debug('No position found, showing with last position');\n                } else {\n                  module.debug('Popup could not find a position to display', $popup);\n                  module.error(error.cannotPlace, element);\n                  module.remove.attempts();\n                  module.remove.loading();\n                  module.reset();\n                  settings.onUnplaceable.call($popup, element);\n                  return false;\n                }\n              }\n            }\n\n            module.debug('Position is on stage', position);\n            module.remove.attempts();\n            module.remove.loading();\n\n            if (settings.setFluidWidth && module.is.fluid()) {\n              module.set.fluidWidth(calculations);\n            }\n\n            return true;\n          },\n          fluidWidth: function (calculations) {\n            calculations = calculations || module.get.calculations();\n            module.debug('Automatically setting element width to parent width', calculations.parent.width);\n            $popup.css('width', calculations.container.width);\n          },\n          variation: function (variation) {\n            variation = variation || module.get.variation();\n\n            if (variation && module.has.popup()) {\n              module.verbose('Adding variation to popup', variation);\n              $popup.addClass(variation);\n            }\n          },\n          visible: function () {\n            $module.addClass(className.visible);\n          }\n        },\n        remove: {\n          loading: function () {\n            $popup.removeClass(className.loading);\n          },\n          variation: function (variation) {\n            variation = variation || module.get.variation();\n\n            if (variation) {\n              module.verbose('Removing variation', variation);\n              $popup.removeClass(variation);\n            }\n          },\n          visible: function () {\n            $module.removeClass(className.visible);\n          },\n          attempts: function () {\n            module.verbose('Resetting all searched positions');\n            searchDepth = 0;\n            triedPositions = false;\n          }\n        },\n        bind: {\n          events: function () {\n            module.debug('Binding popup events to module');\n\n            if (settings.on == 'click') {\n              $module.on('click' + eventNamespace, module.toggle);\n            }\n\n            if (settings.on == 'hover' && hasTouch) {\n              $module.on('touchstart' + eventNamespace, module.event.touchstart);\n            }\n\n            if (module.get.startEvent()) {\n              $module.on(module.get.startEvent() + eventNamespace, module.event.start).on(module.get.endEvent() + eventNamespace, module.event.end);\n            }\n\n            if (settings.target) {\n              module.debug('Target set to element', $target);\n            }\n\n            $window.on('resize' + elementNamespace, module.event.resize);\n          },\n          popup: function () {\n            module.verbose('Allowing hover events on popup to prevent closing');\n\n            if ($popup && module.has.popup()) {\n              $popup.on('mouseenter' + eventNamespace, module.event.start).on('mouseleave' + eventNamespace, module.event.end);\n            }\n          },\n          close: function () {\n            if (settings.hideOnScroll === true || settings.hideOnScroll == 'auto' && settings.on != 'click') {\n              $scrollContext.one(module.get.scrollEvent() + elementNamespace, module.event.hideGracefully);\n            }\n\n            if (settings.on == 'hover' && openedWithTouch) {\n              module.verbose('Binding popup close event to document');\n              $document.on('touchstart' + elementNamespace, function (event) {\n                module.verbose('Touched away from popup');\n                module.event.hideGracefully.call(element, event);\n              });\n            }\n\n            if (settings.on == 'click' && settings.closable) {\n              module.verbose('Binding popup close event to document');\n              $document.on('click' + elementNamespace, function (event) {\n                module.verbose('Clicked away from popup');\n                module.event.hideGracefully.call(element, event);\n              });\n            }\n          }\n        },\n        unbind: {\n          events: function () {\n            $window.off(elementNamespace);\n            $module.off(eventNamespace);\n          },\n          close: function () {\n            $document.off(elementNamespace);\n            $scrollContext.off(elementNamespace);\n          }\n        },\n        has: {\n          popup: function () {\n            return $popup && $popup.length > 0;\n          }\n        },\n        is: {\n          offstage: function (distanceFromBoundary, position) {\n            var offstage = []; // return boundaries that have been surpassed\n\n            $.each(distanceFromBoundary, function (direction, distance) {\n              if (distance < -settings.jitter) {\n                module.debug('Position exceeds allowable distance from edge', direction, distance, position);\n                offstage.push(direction);\n              }\n            });\n\n            if (offstage.length > 0) {\n              return true;\n            } else {\n              return false;\n            }\n          },\n          svg: function (element) {\n            return module.supports.svg() && element instanceof SVGGraphicsElement;\n          },\n          active: function () {\n            return $module.hasClass(className.active);\n          },\n          animating: function () {\n            return $popup !== undefined && $popup.hasClass(className.animating);\n          },\n          fluid: function () {\n            return $popup !== undefined && $popup.hasClass(className.fluid);\n          },\n          visible: function () {\n            return $popup !== undefined && $popup.hasClass(className.visible);\n          },\n          dropdown: function () {\n            return $module.hasClass(className.dropdown);\n          },\n          hidden: function () {\n            return !module.is.visible();\n          },\n          rtl: function () {\n            return $module.css('direction') == 'rtl';\n          }\n        },\n        reset: function () {\n          module.remove.visible();\n\n          if (settings.preserve) {\n            if ($.fn.transition !== undefined) {\n              $popup.transition('remove transition');\n            }\n          } else {\n            module.removePopup();\n          }\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.popup.settings = {\n    name: 'Popup',\n    // module settings\n    silent: false,\n    debug: false,\n    verbose: false,\n    performance: true,\n    namespace: 'popup',\n    // whether it should use dom mutation observers\n    observeChanges: true,\n    // callback only when element added to dom\n    onCreate: function () {},\n    // callback before element removed from dom\n    onRemove: function () {},\n    // callback before show animation\n    onShow: function () {},\n    // callback after show animation\n    onVisible: function () {},\n    // callback before hide animation\n    onHide: function () {},\n    // callback when popup cannot be positioned in visible screen\n    onUnplaceable: function () {},\n    // callback after hide animation\n    onHidden: function () {},\n    // when to show popup\n    on: 'hover',\n    // element to use to determine if popup is out of boundary\n    boundary: window,\n    // whether to add touchstart events when using hover\n    addTouchEvents: true,\n    // default position relative to element\n    position: 'top left',\n    // name of variation to use\n    variation: '',\n    // whether popup should be moved to context\n    movePopup: true,\n    // element which popup should be relative to\n    target: false,\n    // jq selector or element that should be used as popup\n    popup: false,\n    // popup should remain inline next to activator\n    inline: false,\n    // popup should be removed from page on hide\n    preserve: false,\n    // popup should not close when being hovered on\n    hoverable: false,\n    // explicitly set content\n    content: false,\n    // explicitly set html\n    html: false,\n    // explicitly set title\n    title: false,\n    // whether automatically close on clickaway when on click\n    closable: true,\n    // automatically hide on scroll\n    hideOnScroll: 'auto',\n    // hide other popups on show\n    exclusive: false,\n    // context to attach popups\n    context: 'body',\n    // context for binding scroll events\n    scrollContext: window,\n    // position to prefer when calculating new position\n    prefer: 'opposite',\n    // specify position to appear even if it doesn't fit\n    lastResort: false,\n    // delay used to prevent accidental refiring of animations due to user error\n    delay: {\n      show: 50,\n      hide: 70\n    },\n    // whether fluid variation should assign width explicitly\n    setFluidWidth: true,\n    // transition settings\n    duration: 200,\n    transition: 'scale',\n    // distance away from activating element in px\n    distanceAway: 0,\n    // number of pixels an element is allowed to be \"offstage\" for a position to be chosen (allows for rounding)\n    jitter: 2,\n    // offset on aligning axis from calculated position\n    offset: 0,\n    // maximum times to look for a position before failing (9 positions total)\n    maxSearchDepth: 15,\n    error: {\n      invalidPosition: 'The position you specified is not a valid position',\n      cannotPlace: 'Popup does not fit within the boundaries of the viewport',\n      method: 'The method you called is not defined.',\n      noTransition: 'This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>',\n      notFound: 'The target or popup you specified does not exist on the page'\n    },\n    metadata: {\n      activator: 'activator',\n      content: 'content',\n      html: 'html',\n      offset: 'offset',\n      position: 'position',\n      title: 'title',\n      variation: 'variation'\n    },\n    className: {\n      active: 'active',\n      animating: 'animating',\n      dropdown: 'dropdown',\n      fluid: 'fluid',\n      loading: 'loading',\n      popup: 'ui popup',\n      position: 'top left center bottom right',\n      visible: 'visible'\n    },\n    selector: {\n      popup: '.ui.popup'\n    },\n    templates: {\n      escape: function (string) {\n        var badChars = /[&<>\"'`]/g,\n            shouldEscape = /[&<>\"'`]/,\n            escape = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n            escapedChar = function (chr) {\n          return escape[chr];\n        };\n\n        if (shouldEscape.test(string)) {\n          return string.replace(badChars, escapedChar);\n        }\n\n        return string;\n      },\n      popup: function (text) {\n        var html = '',\n            escape = $.fn.popup.settings.templates.escape;\n\n        if ((typeof text === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(text)) !== undefined) {\n          if ((0, _typeof3.default)(text.title) !== undefined && text.title) {\n            text.title = escape(text.title);\n            html += '<div class=\"header\">' + text.title + '</div>';\n          }\n\n          if ((0, _typeof3.default)(text.content) !== undefined && text.content) {\n            text.content = escape(text.content);\n            html += '<div class=\"content\">' + text.content + '</div>';\n          }\n        }\n\n        return html;\n      }\n    }\n  };\n})(jQuery, window, document);","ast":null,"map":{"version":3,"sources":["/client/lib/semantic-ui/definitions/modules/popup.js"],"names":["$","window","document","undefined","Math","self","Function","fn","popup","parameters","$allModules","$document","$window","$body","moduleSelector","selector","hasTouch","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","className","error","metadata","namespace","eventNamespace","moduleNamespace","$module","$context","context","$scrollContext","scrollContext","$boundary","boundary","$target","target","$popup","$offsetParent","searchDepth","triedPositions","openedWithTouch","element","instance","data","documentObserver","elementNamespace","id","module","initialize","debug","createID","bind","events","exists","preserve","create","observeChanges","instantiate","verbose","MutationObserver","event","documentChanged","observe","childList","subtree","refresh","eq","inline","nextAll","addClass","loading","get","offsetParent","removeClass","movePopup","has","detach","appendTo","is","variation","set","reposition","position","destroy","disconnect","removePopup","clearTimeout","hideTimer","showTimer","unbind","close","removeData","start","delay","show","setTimeout","end","hide","touchstart","resize","visible","mutations","forEach","mutation","removedNodes","node","find","length","hideGracefully","isInDOM","contains","documentElement","inPopup","closest","html","title","content","templates","activator","insertAfter","hoverable","onCreate","next","random","toString","substr","toggle","hidden","callback","transition","active","dropdown","onShow","save","conditions","exclusive","hideAll","animate","animating","onHide","remove","restore","filter","onRemove","cache","attr","removeAttr","supports","svg","SVGGraphicsElement","isFunction","animation","queue","duration","onComplete","onVisible","noTransition","reset","onHidden","change","popupOffset","offset","calculations","targetElement","isWindow","targetPosition","screenPosition","top","left","scroll","scrollTop","scrollLeft","screen","width","outerWidth","height","outerHeight","margin","parent","setFluidWidth","fluid","container","parseInt","getComputedStyle","getPropertyValue","rtl","bottom","right","startEvent","on","scrollEvent","endEvent","distanceFromBoundary","parentNode","$node","is2D","css","isStatic","isHTML","positions","nextPosition","split","verticalPosition","horizontalPosition","opposite","adjacent","center","backup","adjacentsAvailable","oppositeTried","adjacentTried","prefer","join","notFound","distanceAway","positioning","replace","match","maxSearchDepth","lastResort","invalidPosition","offstage","cannotPlace","attempts","onUnplaceable","fluidWidth","hideOnScroll","one","closable","off","direction","distance","jitter","push","hasClass","setting","name","value","internal","silent","log","prototype","console","info","apply","message","currentTime","executionTime","previousTime","timer","display","totalTime","index","group","table","groupCollapsed","groupEnd","invoke","passedArguments","object","maxDepth","found","response","depth","camelCaseValue","charAt","toUpperCase","isArray","addTouchEvents","method","escape","string","badChars","shouldEscape","escapedChar","chr","test","text","jQuery"],"mappings":"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","file":"/client/lib/semantic-ui/definitions/modules/popup.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/\n/*!\n * # Semantic UI - Popup\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n\"use strict\";\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.popup = function(parameters) {\n  var\n    $allModules    = $(this),\n    $document      = $(document),\n    $window        = $(window),\n    $body          = $('body'),\n\n    moduleSelector = $allModules.selector || '',\n\n    hasTouch       = (true),\n    time           = new Date().getTime(),\n    performance    = [],\n\n    query          = arguments[0],\n    methodInvoked  = (typeof query == 'string'),\n    queryArguments = [].slice.call(arguments, 1),\n\n    returnedValue\n  ;\n  $allModules\n    .each(function() {\n      var\n        settings        = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.popup.settings, parameters)\n          : $.extend({}, $.fn.popup.settings),\n\n        selector           = settings.selector,\n        className          = settings.className,\n        error              = settings.error,\n        metadata           = settings.metadata,\n        namespace          = settings.namespace,\n\n        eventNamespace     = '.' + settings.namespace,\n        moduleNamespace    = 'module-' + namespace,\n\n        $module            = $(this),\n        $context           = $(settings.context),\n        $scrollContext     = $(settings.scrollContext),\n        $boundary          = $(settings.boundary),\n        $target            = (settings.target)\n          ? $(settings.target)\n          : $module,\n\n        $popup,\n        $offsetParent,\n\n        searchDepth        = 0,\n        triedPositions     = false,\n        openedWithTouch    = false,\n\n        element            = this,\n        instance           = $module.data(moduleNamespace),\n\n        documentObserver,\n        elementNamespace,\n        id,\n        module\n      ;\n\n      module = {\n\n        // binds events\n        initialize: function() {\n          module.debug('Initializing', $module);\n          module.createID();\n          module.bind.events();\n          if(!module.exists() && settings.preserve) {\n            module.create();\n          }\n          module.observeChanges();\n          module.instantiate();\n        },\n\n        instantiate: function() {\n          module.verbose('Storing instance', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, instance)\n          ;\n        },\n\n        observeChanges: function() {\n          if('MutationObserver' in window) {\n            documentObserver = new MutationObserver(module.event.documentChanged);\n            documentObserver.observe(document, {\n              childList : true,\n              subtree   : true\n            });\n            module.debug('Setting up mutation observer', documentObserver);\n          }\n        },\n\n        refresh: function() {\n          if(settings.popup) {\n            $popup = $(settings.popup).eq(0);\n          }\n          else {\n            if(settings.inline) {\n              $popup = $target.nextAll(selector.popup).eq(0);\n              settings.popup = $popup;\n            }\n          }\n          if(settings.popup) {\n            $popup.addClass(className.loading);\n            $offsetParent = module.get.offsetParent();\n            $popup.removeClass(className.loading);\n            if(settings.movePopup && module.has.popup() && module.get.offsetParent($popup)[0] !== $offsetParent[0]) {\n              module.debug('Moving popup to the same offset parent as activating element');\n              $popup\n                .detach()\n                .appendTo($offsetParent)\n              ;\n            }\n          }\n          else {\n            $offsetParent = (settings.inline)\n              ? module.get.offsetParent($target)\n              : module.has.popup()\n                ? module.get.offsetParent($popup)\n                : $body\n            ;\n          }\n          if( $offsetParent.is('html') && $offsetParent[0] !== $body[0] ) {\n            module.debug('Setting page as offset parent');\n            $offsetParent = $body;\n          }\n          if( module.get.variation() ) {\n            module.set.variation();\n          }\n        },\n\n        reposition: function() {\n          module.refresh();\n          module.set.position();\n        },\n\n        destroy: function() {\n          module.debug('Destroying previous module');\n          if(documentObserver) {\n            documentObserver.disconnect();\n          }\n          // remove element only if was created dynamically\n          if($popup && !settings.preserve) {\n            module.removePopup();\n          }\n          // clear all timeouts\n          clearTimeout(module.hideTimer);\n          clearTimeout(module.showTimer);\n          // remove events\n          module.unbind.close();\n          module.unbind.events();\n          $module\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        event: {\n          start:  function(event) {\n            var\n              delay = ($.isPlainObject(settings.delay))\n                ? settings.delay.show\n                : settings.delay\n            ;\n            clearTimeout(module.hideTimer);\n            if(!openedWithTouch) {\n              module.showTimer = setTimeout(module.show, delay);\n            }\n          },\n          end:  function() {\n            var\n              delay = ($.isPlainObject(settings.delay))\n                ? settings.delay.hide\n                : settings.delay\n            ;\n            clearTimeout(module.showTimer);\n            module.hideTimer = setTimeout(module.hide, delay);\n          },\n          touchstart: function(event) {\n            openedWithTouch = true;\n            module.show();\n          },\n          resize: function() {\n            if( module.is.visible() ) {\n              module.set.position();\n            }\n          },\n          documentChanged: function(mutations) {\n            [].forEach.call(mutations, function(mutation) {\n              if(mutation.removedNodes) {\n                [].forEach.call(mutation.removedNodes, function(node) {\n                  if(node == element || $(node).find(element).length > 0) {\n                    module.debug('Element removed from DOM, tearing down events');\n                    module.destroy();\n                  }\n                });\n              }\n            });\n          },\n          hideGracefully: function(event) {\n            var\n              $target = $(event.target),\n              isInDOM = $.contains(document.documentElement, event.target),\n              inPopup = ($target.closest(selector.popup).length > 0)\n            ;\n            // don't close on clicks inside popup\n            if(event && !inPopup && isInDOM) {\n              module.debug('Click occurred outside popup hiding popup');\n              module.hide();\n            }\n            else {\n              module.debug('Click was inside popup, keeping popup open');\n            }\n          }\n        },\n\n        // generates popup html from metadata\n        create: function() {\n          var\n            html      = module.get.html(),\n            title     = module.get.title(),\n            content   = module.get.content()\n          ;\n\n          if(html || content || title) {\n            module.debug('Creating pop-up html');\n            if(!html) {\n              html = settings.templates.popup({\n                title   : title,\n                content : content\n              });\n            }\n            $popup = $('<div/>')\n              .addClass(className.popup)\n              .data(metadata.activator, $module)\n              .html(html)\n            ;\n            if(settings.inline) {\n              module.verbose('Inserting popup element inline', $popup);\n              $popup\n                .insertAfter($module)\n              ;\n            }\n            else {\n              module.verbose('Appending popup element to body', $popup);\n              $popup\n                .appendTo( $context )\n              ;\n            }\n            module.refresh();\n            module.set.variation();\n\n            if(settings.hoverable) {\n              module.bind.popup();\n            }\n            settings.onCreate.call($popup, element);\n          }\n          else if($target.next(selector.popup).length !== 0) {\n            module.verbose('Pre-existing popup found');\n            settings.inline = true;\n            settings.popup  = $target.next(selector.popup).data(metadata.activator, $module);\n            module.refresh();\n            if(settings.hoverable) {\n              module.bind.popup();\n            }\n          }\n          else if(settings.popup) {\n            $(settings.popup).data(metadata.activator, $module);\n            module.verbose('Used popup specified in settings');\n            module.refresh();\n            if(settings.hoverable) {\n              module.bind.popup();\n            }\n          }\n          else {\n            module.debug('No content specified skipping display', element);\n          }\n        },\n\n        createID: function() {\n          id = (Math.random().toString(16) + '000000000').substr(2, 8);\n          elementNamespace = '.' + id;\n          module.verbose('Creating unique id for element', id);\n        },\n\n        // determines popup state\n        toggle: function() {\n          module.debug('Toggling pop-up');\n          if( module.is.hidden() ) {\n            module.debug('Popup is hidden, showing pop-up');\n            module.unbind.close();\n            module.show();\n          }\n          else {\n            module.debug('Popup is visible, hiding pop-up');\n            module.hide();\n          }\n        },\n\n        show: function(callback) {\n          callback = callback || function(){};\n          module.debug('Showing pop-up', settings.transition);\n          if(module.is.hidden() && !( module.is.active() && module.is.dropdown()) ) {\n            if( !module.exists() ) {\n              module.create();\n            }\n            if(settings.onShow.call($popup, element) === false) {\n              module.debug('onShow callback returned false, cancelling popup animation');\n              return;\n            }\n            else if(!settings.preserve && !settings.popup) {\n              module.refresh();\n            }\n            if( $popup && module.set.position() ) {\n              module.save.conditions();\n              if(settings.exclusive) {\n                module.hideAll();\n              }\n              module.animate.show(callback);\n            }\n          }\n        },\n\n\n        hide: function(callback) {\n          callback = callback || function(){};\n          if( module.is.visible() || module.is.animating() ) {\n            if(settings.onHide.call($popup, element) === false) {\n              module.debug('onHide callback returned false, cancelling popup animation');\n              return;\n            }\n            module.remove.visible();\n            module.unbind.close();\n            module.restore.conditions();\n            module.animate.hide(callback);\n          }\n        },\n\n        hideAll: function() {\n          $(selector.popup)\n            .filter('.' + className.visible)\n            .each(function() {\n              $(this)\n                .data(metadata.activator)\n                  .popup('hide')\n              ;\n            })\n          ;\n        },\n        exists: function() {\n          if(!$popup) {\n            return false;\n          }\n          if(settings.inline || settings.popup) {\n            return ( module.has.popup() );\n          }\n          else {\n            return ( $popup.closest($context).length >= 1 )\n              ? true\n              : false\n            ;\n          }\n        },\n\n        removePopup: function() {\n          if( module.has.popup() && !settings.popup) {\n            module.debug('Removing popup', $popup);\n            $popup.remove();\n            $popup = undefined;\n            settings.onRemove.call($popup, element);\n          }\n        },\n\n        save: {\n          conditions: function() {\n            module.cache = {\n              title: $module.attr('title')\n            };\n            if (module.cache.title) {\n              $module.removeAttr('title');\n            }\n            module.verbose('Saving original attributes', module.cache.title);\n          }\n        },\n        restore: {\n          conditions: function() {\n            if(module.cache && module.cache.title) {\n              $module.attr('title', module.cache.title);\n              module.verbose('Restoring original attributes', module.cache.title);\n            }\n            return true;\n          }\n        },\n        supports: {\n          svg: function() {\n            return (typeof SVGGraphicsElement === undefined);\n          }\n        },\n        animate: {\n          show: function(callback) {\n            callback = $.isFunction(callback) ? callback : function(){};\n            if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n              module.set.visible();\n              $popup\n                .transition({\n                  animation  : settings.transition + ' in',\n                  queue      : false,\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  onComplete : function() {\n                    module.bind.close();\n                    callback.call($popup, element);\n                    settings.onVisible.call($popup, element);\n                  }\n                })\n              ;\n            }\n            else {\n              module.error(error.noTransition);\n            }\n          },\n          hide: function(callback) {\n            callback = $.isFunction(callback) ? callback : function(){};\n            module.debug('Hiding pop-up');\n            if(settings.onHide.call($popup, element) === false) {\n              module.debug('onHide callback returned false, cancelling popup animation');\n              return;\n            }\n            if(settings.transition && $.fn.transition !== undefined && $module.transition('is supported')) {\n              $popup\n                .transition({\n                  animation  : settings.transition + ' out',\n                  queue      : false,\n                  duration   : settings.duration,\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  onComplete : function() {\n                    module.reset();\n                    callback.call($popup, element);\n                    settings.onHidden.call($popup, element);\n                  }\n                })\n              ;\n            }\n            else {\n              module.error(error.noTransition);\n            }\n          }\n        },\n\n        change: {\n          content: function(html) {\n            $popup.html(html);\n          }\n        },\n\n        get: {\n          html: function() {\n            $module.removeData(metadata.html);\n            return $module.data(metadata.html) || settings.html;\n          },\n          title: function() {\n            $module.removeData(metadata.title);\n            return $module.data(metadata.title) || settings.title;\n          },\n          content: function() {\n            $module.removeData(metadata.content);\n            return $module.data(metadata.content) || $module.attr('title') || settings.content;\n          },\n          variation: function() {\n            $module.removeData(metadata.variation);\n            return $module.data(metadata.variation) || settings.variation;\n          },\n          popup: function() {\n            return $popup;\n          },\n          popupOffset: function() {\n            return $popup.offset();\n          },\n          calculations: function() {\n            var\n              targetElement    = $target[0],\n              isWindow         = ($boundary[0] == window),\n              targetPosition   = (settings.inline || (settings.popup && settings.movePopup))\n                ? $target.position()\n                : $target.offset(),\n              screenPosition = (isWindow)\n                ? { top: 0, left: 0 }\n                : $boundary.offset(),\n              calculations   = {},\n              scroll = (isWindow)\n                ? { top: $window.scrollTop(), left: $window.scrollLeft() }\n                : { top: 0, left: 0},\n              screen\n            ;\n            calculations = {\n              // element which is launching popup\n              target : {\n                element : $target[0],\n                width   : $target.outerWidth(),\n                height  : $target.outerHeight(),\n                top     : targetPosition.top,\n                left    : targetPosition.left,\n                margin  : {}\n              },\n              // popup itself\n              popup : {\n                width  : $popup.outerWidth(),\n                height : $popup.outerHeight()\n              },\n              // offset container (or 3d context)\n              parent : {\n                width  : $offsetParent.outerWidth(),\n                height : $offsetParent.outerHeight()\n              },\n              // screen boundaries\n              screen : {\n                top  : screenPosition.top,\n                left : screenPosition.left,\n                scroll: {\n                  top  : scroll.top,\n                  left : scroll.left\n                },\n                width  : $boundary.width(),\n                height : $boundary.height()\n              }\n            };\n\n            // add in container calcs if fluid\n            if( settings.setFluidWidth && module.is.fluid() ) {\n              calculations.container = {\n                width: $popup.parent().outerWidth()\n              };\n              calculations.popup.width = calculations.container.width;\n            }\n\n            // add in margins if inline\n            calculations.target.margin.top = (settings.inline)\n              ? parseInt( window.getComputedStyle(targetElement).getPropertyValue('margin-top'), 10)\n              : 0\n            ;\n            calculations.target.margin.left = (settings.inline)\n              ? module.is.rtl()\n                ? parseInt( window.getComputedStyle(targetElement).getPropertyValue('margin-right'), 10)\n                : parseInt( window.getComputedStyle(targetElement).getPropertyValue('margin-left'), 10)\n              : 0\n            ;\n            // calculate screen boundaries\n            screen = calculations.screen;\n            calculations.boundary = {\n              top    : screen.top + screen.scroll.top,\n              bottom : screen.top + screen.scroll.top + screen.height,\n              left   : screen.left + screen.scroll.left,\n              right  : screen.left + screen.scroll.left + screen.width\n            };\n            return calculations;\n          },\n          id: function() {\n            return id;\n          },\n          startEvent: function() {\n            if(settings.on == 'hover') {\n              return 'mouseenter';\n            }\n            else if(settings.on == 'focus') {\n              return 'focus';\n            }\n            return false;\n          },\n          scrollEvent: function() {\n            return 'scroll';\n          },\n          endEvent: function() {\n            if(settings.on == 'hover') {\n              return 'mouseleave';\n            }\n            else if(settings.on == 'focus') {\n              return 'blur';\n            }\n            return false;\n          },\n          distanceFromBoundary: function(offset, calculations) {\n            var\n              distanceFromBoundary = {},\n              popup,\n              boundary\n            ;\n            calculations = calculations || module.get.calculations();\n\n            // shorthand\n            popup        = calculations.popup;\n            boundary     = calculations.boundary;\n\n            if(offset) {\n              distanceFromBoundary = {\n                top    : (offset.top - boundary.top),\n                left   : (offset.left - boundary.left),\n                right  : (boundary.right - (offset.left + popup.width) ),\n                bottom : (boundary.bottom - (offset.top + popup.height) )\n              };\n              module.verbose('Distance from boundaries determined', offset, distanceFromBoundary);\n            }\n            return distanceFromBoundary;\n          },\n          offsetParent: function($target) {\n            var\n              element = ($target !== undefined)\n                ? $target[0]\n                : $module[0],\n              parentNode = element.parentNode,\n              $node    = $(parentNode)\n            ;\n            if(parentNode) {\n              var\n                is2D     = ($node.css('transform') === 'none'),\n                isStatic = ($node.css('position') === 'static'),\n                isHTML   = $node.is('html')\n              ;\n              while(parentNode && !isHTML && isStatic && is2D) {\n                parentNode = parentNode.parentNode;\n                $node    = $(parentNode);\n                is2D     = ($node.css('transform') === 'none');\n                isStatic = ($node.css('position') === 'static');\n                isHTML   = $node.is('html');\n              }\n            }\n            return ($node && $node.length > 0)\n              ? $node\n              : $()\n            ;\n          },\n          positions: function() {\n            return {\n              'top left'      : false,\n              'top center'    : false,\n              'top right'     : false,\n              'bottom left'   : false,\n              'bottom center' : false,\n              'bottom right'  : false,\n              'left center'   : false,\n              'right center'  : false\n            };\n          },\n          nextPosition: function(position) {\n            var\n              positions          = position.split(' '),\n              verticalPosition   = positions[0],\n              horizontalPosition = positions[1],\n              opposite = {\n                top    : 'bottom',\n                bottom : 'top',\n                left   : 'right',\n                right  : 'left'\n              },\n              adjacent = {\n                left   : 'center',\n                center : 'right',\n                right  : 'left'\n              },\n              backup = {\n                'top left'      : 'top center',\n                'top center'    : 'top right',\n                'top right'     : 'right center',\n                'right center'  : 'bottom right',\n                'bottom right'  : 'bottom center',\n                'bottom center' : 'bottom left',\n                'bottom left'   : 'left center',\n                'left center'   : 'top left'\n              },\n              adjacentsAvailable = (verticalPosition == 'top' || verticalPosition == 'bottom'),\n              oppositeTried = false,\n              adjacentTried = false,\n              nextPosition  = false\n            ;\n            if(!triedPositions) {\n              module.verbose('All available positions available');\n              triedPositions = module.get.positions();\n            }\n\n            module.debug('Recording last position tried', position);\n            triedPositions[position] = true;\n\n            if(settings.prefer === 'opposite') {\n              nextPosition  = [opposite[verticalPosition], horizontalPosition];\n              nextPosition  = nextPosition.join(' ');\n              oppositeTried = (triedPositions[nextPosition] === true);\n              module.debug('Trying opposite strategy', nextPosition);\n            }\n            if((settings.prefer === 'adjacent') && adjacentsAvailable ) {\n              nextPosition  = [verticalPosition, adjacent[horizontalPosition]];\n              nextPosition  = nextPosition.join(' ');\n              adjacentTried = (triedPositions[nextPosition] === true);\n              module.debug('Trying adjacent strategy', nextPosition);\n            }\n            if(adjacentTried || oppositeTried) {\n              module.debug('Using backup position', nextPosition);\n              nextPosition = backup[position];\n            }\n            return nextPosition;\n          }\n        },\n\n        set: {\n          position: function(position, calculations) {\n\n            // exit conditions\n            if($target.length === 0 || $popup.length === 0) {\n              module.error(error.notFound);\n              return;\n            }\n            var\n              offset,\n              distanceAway,\n              target,\n              popup,\n              parent,\n              positioning,\n              popupOffset,\n              distanceFromBoundary\n            ;\n\n            calculations = calculations || module.get.calculations();\n            position     = position     || $module.data(metadata.position) || settings.position;\n\n            offset       = $module.data(metadata.offset) || settings.offset;\n            distanceAway = settings.distanceAway;\n\n            // shorthand\n            target = calculations.target;\n            popup  = calculations.popup;\n            parent = calculations.parent;\n\n            if(target.width === 0 && target.height === 0 && !module.is.svg(target.element)) {\n              module.debug('Popup target is hidden, no action taken');\n              return false;\n            }\n\n            if(settings.inline) {\n              module.debug('Adding margin to calculation', target.margin);\n              if(position == 'left center' || position == 'right center') {\n                offset       +=  target.margin.top;\n                distanceAway += -target.margin.left;\n              }\n              else if (position == 'top left' || position == 'top center' || position == 'top right') {\n                offset       += target.margin.left;\n                distanceAway -= target.margin.top;\n              }\n              else {\n                offset       += target.margin.left;\n                distanceAway += target.margin.top;\n              }\n            }\n\n            module.debug('Determining popup position from calculations', position, calculations);\n\n            if (module.is.rtl()) {\n              position = position.replace(/left|right/g, function (match) {\n                return (match == 'left')\n                  ? 'right'\n                  : 'left'\n                ;\n              });\n              module.debug('RTL: Popup position updated', position);\n            }\n\n            // if last attempt use specified last resort position\n            if(searchDepth == settings.maxSearchDepth && typeof settings.lastResort === 'string') {\n              position = settings.lastResort;\n            }\n\n            switch (position) {\n              case 'top left':\n                positioning = {\n                  top    : 'auto',\n                  bottom : parent.height - target.top + distanceAway,\n                  left   : target.left + offset,\n                  right  : 'auto'\n                };\n              break;\n              case 'top center':\n                positioning = {\n                  bottom : parent.height - target.top + distanceAway,\n                  left   : target.left + (target.width / 2) - (popup.width / 2) + offset,\n                  top    : 'auto',\n                  right  : 'auto'\n                };\n              break;\n              case 'top right':\n                positioning = {\n                  bottom :  parent.height - target.top + distanceAway,\n                  right  :  parent.width - target.left - target.width - offset,\n                  top    : 'auto',\n                  left   : 'auto'\n                };\n              break;\n              case 'left center':\n                positioning = {\n                  top    : target.top + (target.height / 2) - (popup.height / 2) + offset,\n                  right  : parent.width - target.left + distanceAway,\n                  left   : 'auto',\n                  bottom : 'auto'\n                };\n              break;\n              case 'right center':\n                positioning = {\n                  top    : target.top + (target.height / 2) - (popup.height / 2) + offset,\n                  left   : target.left + target.width + distanceAway,\n                  bottom : 'auto',\n                  right  : 'auto'\n                };\n              break;\n              case 'bottom left':\n                positioning = {\n                  top    : target.top + target.height + distanceAway,\n                  left   : target.left + offset,\n                  bottom : 'auto',\n                  right  : 'auto'\n                };\n              break;\n              case 'bottom center':\n                positioning = {\n                  top    : target.top + target.height + distanceAway,\n                  left   : target.left + (target.width / 2) - (popup.width / 2) + offset,\n                  bottom : 'auto',\n                  right  : 'auto'\n                };\n              break;\n              case 'bottom right':\n                positioning = {\n                  top    : target.top + target.height + distanceAway,\n                  right  : parent.width - target.left  - target.width - offset,\n                  left   : 'auto',\n                  bottom : 'auto'\n                };\n              break;\n            }\n            if(positioning === undefined) {\n              module.error(error.invalidPosition, position);\n            }\n\n            module.debug('Calculated popup positioning values', positioning);\n\n            // tentatively place on stage\n            $popup\n              .css(positioning)\n              .removeClass(className.position)\n              .addClass(position)\n              .addClass(className.loading)\n            ;\n\n            popupOffset = module.get.popupOffset();\n\n            // see if any boundaries are surpassed with this tentative position\n            distanceFromBoundary = module.get.distanceFromBoundary(popupOffset, calculations);\n\n            if( module.is.offstage(distanceFromBoundary, position) ) {\n              module.debug('Position is outside viewport', position);\n              if(searchDepth < settings.maxSearchDepth) {\n                searchDepth++;\n                position = module.get.nextPosition(position);\n                module.debug('Trying new position', position);\n                return ($popup)\n                  ? module.set.position(position, calculations)\n                  : false\n                ;\n              }\n              else {\n                if(settings.lastResort) {\n                  module.debug('No position found, showing with last position');\n                }\n                else {\n                  module.debug('Popup could not find a position to display', $popup);\n                  module.error(error.cannotPlace, element);\n                  module.remove.attempts();\n                  module.remove.loading();\n                  module.reset();\n                  settings.onUnplaceable.call($popup, element);\n                  return false;\n                }\n              }\n            }\n            module.debug('Position is on stage', position);\n            module.remove.attempts();\n            module.remove.loading();\n            if( settings.setFluidWidth && module.is.fluid() ) {\n              module.set.fluidWidth(calculations);\n            }\n            return true;\n          },\n\n          fluidWidth: function(calculations) {\n            calculations = calculations || module.get.calculations();\n            module.debug('Automatically setting element width to parent width', calculations.parent.width);\n            $popup.css('width', calculations.container.width);\n          },\n\n          variation: function(variation) {\n            variation = variation || module.get.variation();\n            if(variation && module.has.popup() ) {\n              module.verbose('Adding variation to popup', variation);\n              $popup.addClass(variation);\n            }\n          },\n\n          visible: function() {\n            $module.addClass(className.visible);\n          }\n        },\n\n        remove: {\n          loading: function() {\n            $popup.removeClass(className.loading);\n          },\n          variation: function(variation) {\n            variation = variation || module.get.variation();\n            if(variation) {\n              module.verbose('Removing variation', variation);\n              $popup.removeClass(variation);\n            }\n          },\n          visible: function() {\n            $module.removeClass(className.visible);\n          },\n          attempts: function() {\n            module.verbose('Resetting all searched positions');\n            searchDepth    = 0;\n            triedPositions = false;\n          }\n        },\n\n        bind: {\n          events: function() {\n            module.debug('Binding popup events to module');\n            if(settings.on == 'click') {\n              $module\n                .on('click' + eventNamespace, module.toggle)\n              ;\n            }\n            if(settings.on == 'hover' && hasTouch) {\n              $module\n                .on('touchstart' + eventNamespace, module.event.touchstart)\n              ;\n            }\n            if( module.get.startEvent() ) {\n              $module\n                .on(module.get.startEvent() + eventNamespace, module.event.start)\n                .on(module.get.endEvent() + eventNamespace, module.event.end)\n              ;\n            }\n            if(settings.target) {\n              module.debug('Target set to element', $target);\n            }\n            $window.on('resize' + elementNamespace, module.event.resize);\n          },\n          popup: function() {\n            module.verbose('Allowing hover events on popup to prevent closing');\n            if( $popup && module.has.popup() ) {\n              $popup\n                .on('mouseenter' + eventNamespace, module.event.start)\n                .on('mouseleave' + eventNamespace, module.event.end)\n              ;\n            }\n          },\n          close: function() {\n            if(settings.hideOnScroll === true || (settings.hideOnScroll == 'auto' && settings.on != 'click')) {\n              $scrollContext\n                .one(module.get.scrollEvent() + elementNamespace, module.event.hideGracefully)\n              ;\n            }\n            if(settings.on == 'hover' && openedWithTouch) {\n              module.verbose('Binding popup close event to document');\n              $document\n                .on('touchstart' + elementNamespace, function(event) {\n                  module.verbose('Touched away from popup');\n                  module.event.hideGracefully.call(element, event);\n                })\n              ;\n            }\n            if(settings.on == 'click' && settings.closable) {\n              module.verbose('Binding popup close event to document');\n              $document\n                .on('click' + elementNamespace, function(event) {\n                  module.verbose('Clicked away from popup');\n                  module.event.hideGracefully.call(element, event);\n                })\n              ;\n            }\n          }\n        },\n\n        unbind: {\n          events: function() {\n            $window\n              .off(elementNamespace)\n            ;\n            $module\n              .off(eventNamespace)\n            ;\n          },\n          close: function() {\n            $document\n              .off(elementNamespace)\n            ;\n            $scrollContext\n              .off(elementNamespace)\n            ;\n          },\n        },\n\n        has: {\n          popup: function() {\n            return ($popup && $popup.length > 0);\n          }\n        },\n\n        is: {\n          offstage: function(distanceFromBoundary, position) {\n            var\n              offstage = []\n            ;\n            // return boundaries that have been surpassed\n            $.each(distanceFromBoundary, function(direction, distance) {\n              if(distance < -settings.jitter) {\n                module.debug('Position exceeds allowable distance from edge', direction, distance, position);\n                offstage.push(direction);\n              }\n            });\n            if(offstage.length > 0) {\n              return true;\n            }\n            else {\n              return false;\n            }\n          },\n          svg: function(element) {\n            return module.supports.svg() && (element instanceof SVGGraphicsElement);\n          },\n          active: function() {\n            return $module.hasClass(className.active);\n          },\n          animating: function() {\n            return ($popup !== undefined && $popup.hasClass(className.animating) );\n          },\n          fluid: function() {\n            return ($popup !== undefined && $popup.hasClass(className.fluid));\n          },\n          visible: function() {\n            return ($popup !== undefined && $popup.hasClass(className.visible));\n          },\n          dropdown: function() {\n            return $module.hasClass(className.dropdown);\n          },\n          hidden: function() {\n            return !module.is.visible();\n          },\n          rtl: function () {\n            return $module.css('direction') == 'rtl';\n          }\n        },\n\n        reset: function() {\n          module.remove.visible();\n          if(settings.preserve) {\n            if($.fn.transition !== undefined) {\n              $popup\n                .transition('remove transition')\n              ;\n            }\n          }\n          else {\n            module.removePopup();\n          }\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if ( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.popup.settings = {\n\n  name           : 'Popup',\n\n  // module settings\n  silent         : false,\n  debug          : false,\n  verbose        : false,\n  performance    : true,\n  namespace      : 'popup',\n\n  // whether it should use dom mutation observers\n  observeChanges : true,\n\n  // callback only when element added to dom\n  onCreate       : function(){},\n\n  // callback before element removed from dom\n  onRemove       : function(){},\n\n  // callback before show animation\n  onShow         : function(){},\n\n  // callback after show animation\n  onVisible      : function(){},\n\n  // callback before hide animation\n  onHide         : function(){},\n\n  // callback when popup cannot be positioned in visible screen\n  onUnplaceable  : function(){},\n\n  // callback after hide animation\n  onHidden       : function(){},\n\n  // when to show popup\n  on             : 'hover',\n\n  // element to use to determine if popup is out of boundary\n  boundary       : window,\n\n  // whether to add touchstart events when using hover\n  addTouchEvents : true,\n\n  // default position relative to element\n  position       : 'top left',\n\n  // name of variation to use\n  variation      : '',\n\n  // whether popup should be moved to context\n  movePopup      : true,\n\n  // element which popup should be relative to\n  target         : false,\n\n  // jq selector or element that should be used as popup\n  popup          : false,\n\n  // popup should remain inline next to activator\n  inline         : false,\n\n  // popup should be removed from page on hide\n  preserve       : false,\n\n  // popup should not close when being hovered on\n  hoverable      : false,\n\n  // explicitly set content\n  content        : false,\n\n  // explicitly set html\n  html           : false,\n\n  // explicitly set title\n  title          : false,\n\n  // whether automatically close on clickaway when on click\n  closable       : true,\n\n  // automatically hide on scroll\n  hideOnScroll   : 'auto',\n\n  // hide other popups on show\n  exclusive      : false,\n\n  // context to attach popups\n  context        : 'body',\n\n  // context for binding scroll events\n  scrollContext  : window,\n\n  // position to prefer when calculating new position\n  prefer         : 'opposite',\n\n  // specify position to appear even if it doesn't fit\n  lastResort     : false,\n\n  // delay used to prevent accidental refiring of animations due to user error\n  delay        : {\n    show : 50,\n    hide : 70\n  },\n\n  // whether fluid variation should assign width explicitly\n  setFluidWidth  : true,\n\n  // transition settings\n  duration       : 200,\n  transition     : 'scale',\n\n  // distance away from activating element in px\n  distanceAway   : 0,\n\n  // number of pixels an element is allowed to be \"offstage\" for a position to be chosen (allows for rounding)\n  jitter         : 2,\n\n  // offset on aligning axis from calculated position\n  offset         : 0,\n\n  // maximum times to look for a position before failing (9 positions total)\n  maxSearchDepth : 15,\n\n  error: {\n    invalidPosition : 'The position you specified is not a valid position',\n    cannotPlace     : 'Popup does not fit within the boundaries of the viewport',\n    method          : 'The method you called is not defined.',\n    noTransition    : 'This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>',\n    notFound        : 'The target or popup you specified does not exist on the page'\n  },\n\n  metadata: {\n    activator : 'activator',\n    content   : 'content',\n    html      : 'html',\n    offset    : 'offset',\n    position  : 'position',\n    title     : 'title',\n    variation : 'variation'\n  },\n\n  className   : {\n    active    : 'active',\n    animating : 'animating',\n    dropdown  : 'dropdown',\n    fluid     : 'fluid',\n    loading   : 'loading',\n    popup     : 'ui popup',\n    position  : 'top left center bottom right',\n    visible   : 'visible'\n  },\n\n  selector    : {\n    popup    : '.ui.popup'\n  },\n\n  templates: {\n    escape: function(string) {\n      var\n        badChars     = /[&<>\"'`]/g,\n        shouldEscape = /[&<>\"'`]/,\n        escape       = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n        escapedChar  = function(chr) {\n          return escape[chr];\n        }\n      ;\n      if(shouldEscape.test(string)) {\n        return string.replace(badChars, escapedChar);\n      }\n      return string;\n    },\n    popup: function(text) {\n      var\n        html   = '',\n        escape = $.fn.popup.settings.templates.escape\n      ;\n      if(typeof text !== undefined) {\n        if(typeof text.title !== undefined && text.title) {\n          text.title = escape(text.title);\n          html += '<div class=\"header\">' + text.title + '</div>';\n        }\n        if(typeof text.content !== undefined && text.content) {\n          text.content = escape(text.content);\n          html += '<div class=\"content\">' + text.content + '</div>';\n        }\n      }\n      return html;\n    }\n  }\n\n};\n\n\n})( jQuery, window, document );\n"]},"hash":"b9bd5d7ebecc0a565bd02a1b96c93532311dd195"}
