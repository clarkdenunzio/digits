{"metadata":{"usedHelpers":["typeof","interopRequireDefault"],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/lib/semantic-ui/definitions/modules/search.js","filenameRelative":"/client/lib/semantic-ui/definitions/modules/search.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/lib/semantic-ui/definitions/modules/search.js.map","sourceFileName":"/client/lib/semantic-ui/definitions/modules/search.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"search"},"ignored":false,"code":"var _typeof2 = require(\"babel-runtime/helpers/typeof\");\n\nvar _typeof3 = _interopRequireDefault(_typeof2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\n/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/ /*!\n    * # Semantic UI - Search\n    * http://github.com/semantic-org/semantic-ui/\n    *\n    *\n    * Released under the MIT license\n    * http://opensource.org/licenses/MIT\n    *\n    */;\n\n(function ($, window, document, undefined) {\n  \"use strict\";\n\n  window = typeof window != 'undefined' && window.Math == Math ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();\n\n  $.fn.search = function (parameters) {\n    var $allModules = $(this),\n        moduleSelector = $allModules.selector || '',\n        time = new Date().getTime(),\n        performance = [],\n        query = arguments[0],\n        methodInvoked = typeof query == 'string',\n        queryArguments = [].slice.call(arguments, 1),\n        returnedValue;\n    $(this).each(function () {\n      var settings = $.isPlainObject(parameters) ? $.extend(true, {}, $.fn.search.settings, parameters) : $.extend({}, $.fn.search.settings),\n          className = settings.className,\n          metadata = settings.metadata,\n          regExp = settings.regExp,\n          fields = settings.fields,\n          selector = settings.selector,\n          error = settings.error,\n          namespace = settings.namespace,\n          eventNamespace = '.' + namespace,\n          moduleNamespace = namespace + '-module',\n          $module = $(this),\n          $prompt = $module.find(selector.prompt),\n          $searchButton = $module.find(selector.searchButton),\n          $results = $module.find(selector.results),\n          $result = $module.find(selector.result),\n          $category = $module.find(selector.category),\n          element = this,\n          instance = $module.data(moduleNamespace),\n          disabledBubbled = false,\n          module;\n      module = {\n        initialize: function () {\n          module.verbose('Initializing module');\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function () {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module.data(moduleNamespace, module);\n        },\n        destroy: function () {\n          module.verbose('Destroying instance');\n          $module.off(eventNamespace).removeData(moduleNamespace);\n        },\n        refresh: function () {\n          module.debug('Refreshing selector cache');\n          $prompt = $module.find(selector.prompt);\n          $searchButton = $module.find(selector.searchButton);\n          $category = $module.find(selector.category);\n          $results = $module.find(selector.results);\n          $result = $module.find(selector.result);\n        },\n        refreshResults: function () {\n          $results = $module.find(selector.results);\n          $result = $module.find(selector.result);\n        },\n        bind: {\n          events: function () {\n            module.verbose('Binding events to search');\n\n            if (settings.automatic) {\n              $module.on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input);\n              $prompt.attr('autocomplete', 'off');\n            }\n\n            $module // prompt\n            .on('focus' + eventNamespace, selector.prompt, module.event.focus).on('blur' + eventNamespace, selector.prompt, module.event.blur).on('keydown' + eventNamespace, selector.prompt, module.handleKeyboard) // search button\n            .on('click' + eventNamespace, selector.searchButton, module.query) // results\n            .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown).on('mouseup' + eventNamespace, selector.results, module.event.result.mouseup).on('click' + eventNamespace, selector.result, module.event.result.click);\n          }\n        },\n        determine: {\n          searchFields: function () {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if (parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n        event: {\n          input: function () {\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.query, settings.searchDelay);\n          },\n          focus: function () {\n            module.set.focus();\n\n            if (module.has.minimumCharacters()) {\n              module.query();\n\n              if (module.can.show()) {\n                module.showResults();\n              }\n            }\n          },\n          blur: function (event) {\n            var pageLostFocus = document.activeElement === this,\n                callback = function () {\n              module.cancel.query();\n              module.remove.focus();\n              module.timer = setTimeout(module.hideResults, settings.hideDelay);\n            };\n\n            if (pageLostFocus) {\n              return;\n            }\n\n            if (module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module.one('click.close' + eventNamespace, selector.results, function (event) {\n                if (module.is.inMessage(event) || disabledBubbled) {\n                  $prompt.focus();\n                  return;\n                }\n\n                disabledBubbled = false;\n\n                if (!module.is.animating() && !module.is.hidden()) {\n                  callback();\n                }\n              });\n            } else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function () {\n              module.resultsClicked = true;\n            },\n            mouseup: function () {\n              module.resultsClicked = false;\n            },\n            click: function (event) {\n              module.debug('Search result selected');\n              var $result = $(this),\n                  $title = $result.find(selector.title).eq(0),\n                  $link = $result.is('a[href]') ? $result : $result.find('a[href]').eq(0),\n                  href = $link.attr('href') || false,\n                  target = $link.attr('target') || false,\n                  title = $title.html(),\n                  // title is used for result lookup\n              value = $title.length > 0 ? $title.text() : false,\n                  results = module.get.results(),\n                  result = $result.data(metadata.result) || module.get.result(value, results),\n                  returnedValue;\n\n              if ($.isFunction(settings.onSelect)) {\n                if (settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  disabledBubbled = true;\n                  return;\n                }\n              }\n\n              module.hideResults();\n\n              if (value) {\n                module.set.value(value);\n              }\n\n              if (href) {\n                module.verbose('Opening search link found in result', $link);\n\n                if (target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                } else {\n                  window.location.href = href;\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function (event) {\n          var // force selector refresh\n          $result = $module.find(selector.result),\n              $category = $module.find(selector.category),\n              currentIndex = $result.index($result.filter('.' + className.active)),\n              resultSize = $result.length,\n              keyCode = event.which,\n              keys = {\n            backspace: 8,\n            enter: 13,\n            escape: 27,\n            upArrow: 38,\n            downArrow: 40\n          },\n              newIndex; // search shortcuts\n\n          if (keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.trigger.blur();\n          }\n\n          if (module.is.visible()) {\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n\n              if ($result.filter('.' + className.active).length > 0) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            } else if (keyCode == keys.upArrow) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = currentIndex - 1 < 0 ? currentIndex : currentIndex - 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            } else if (keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = currentIndex + 1 >= resultSize ? currentIndex : currentIndex + 1;\n              $category.removeClass(className.active);\n              $result.removeClass(className.active).eq(newIndex).addClass(className.active).closest($category).addClass(className.active);\n              event.preventDefault();\n            }\n          } else {\n            // query shortcuts\n            if (keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n        setup: {\n          api: function (searchTerm) {\n            var apiSettings = {\n              debug: settings.debug,\n              on: false,\n              cache: true,\n              action: 'search',\n              urlData: {\n                query: searchTerm\n              },\n              onSuccess: function (response) {\n                module.parse.response.call(element, response, searchTerm);\n              },\n              onAbort: function (response) {},\n              onFailure: function () {\n                module.displayMessage(error.serverError);\n              },\n              onError: module.error\n            },\n                searchHTML;\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.verbose('Setting up API request', apiSettings);\n            $module.api(apiSettings);\n          }\n        },\n        can: {\n          useAPI: function () {\n            return $.fn.api !== undefined;\n          },\n          show: function () {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function () {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n        is: {\n          animating: function () {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function () {\n            return $results.hasClass(className.hidden);\n          },\n          inMessage: function (event) {\n            return event.target && $(event.target).closest(selector.message).length > 0;\n          },\n          empty: function () {\n            return $results.html() === '';\n          },\n          visible: function () {\n            return $results.filter(':visible').length > 0;\n          },\n          focused: function () {\n            return $prompt.filter(':focus').length > 0;\n          }\n        },\n        trigger: {\n          blur: function () {\n            var events = document.createEvent('HTMLEvents'),\n                promptElement = $prompt[0];\n\n            if (promptElement) {\n              module.verbose('Triggering native blur event');\n              events.initEvent('blur', false, false);\n              promptElement.dispatchEvent(events);\n            }\n          }\n        },\n        get: {\n          inputEvent: function () {\n            var prompt = $prompt[0],\n                inputEvent = prompt !== undefined && prompt.oninput !== undefined ? 'input' : prompt !== undefined && prompt.onpropertychange !== undefined ? 'propertychange' : 'keyup';\n            return inputEvent;\n          },\n          value: function () {\n            return $prompt.val();\n          },\n          results: function () {\n            var results = $module.data(metadata.results);\n            return results;\n          },\n          result: function (value, results) {\n            var lookupFields = ['title', 'id'],\n                result = false;\n            value = value !== undefined ? value : module.get.value();\n            results = results !== undefined ? results : module.get.results();\n\n            if (settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function (index, category) {\n                if ($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0]; // don't continue searching if a result is found\n\n                  if (result) {\n                    return false;\n                  }\n                }\n              });\n            } else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n\n            return result || false;\n          }\n        },\n        select: {\n          firstResult: function () {\n            module.verbose('Selecting first result');\n            $result.first().addClass(className.active);\n          }\n        },\n        set: {\n          focus: function () {\n            $module.addClass(className.focus);\n          },\n          loading: function () {\n            $module.addClass(className.loading);\n          },\n          value: function (value) {\n            module.verbose('Setting search input value', value);\n            $prompt.val(value);\n          },\n          type: function (type) {\n            type = type || settings.type;\n\n            if (settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function () {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n        remove: {\n          loading: function () {\n            $module.removeClass(className.loading);\n          },\n          focus: function () {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function () {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n        query: function () {\n          var searchTerm = module.get.value(),\n              cache = module.read.cache(searchTerm);\n\n          if (module.has.minimumCharacters()) {\n            if (cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n            } else {\n              module.debug('Querying for', searchTerm);\n\n              if ($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n              } else if (module.can.useAPI()) {\n                module.search.remote(searchTerm);\n              } else {\n                module.error(error.source);\n              }\n            }\n\n            settings.onSearchQuery.call(element, searchTerm);\n          } else {\n            module.hideResults();\n          }\n        },\n        search: {\n          local: function (searchTerm) {\n            var results = module.search.object(searchTerm, settings.content),\n                searchHTML;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned local search results', results);\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html: searchHTML,\n              results: results\n            });\n          },\n          remote: function (searchTerm) {\n            if ($module.api('is loading')) {\n              $module.api('abort');\n            }\n\n            module.setup.api(searchTerm);\n            $module.api('query');\n          },\n          object: function (searchTerm, source, searchFields) {\n            var results = [],\n                fuzzyResults = [],\n                searchExp = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n                matchRegExp = new RegExp(regExp.beginsWith + searchExp, 'i'),\n                // avoid duplicates when pushing results\n            addResult = function (array, result) {\n              var notResult = $.inArray(result, results) == -1,\n                  notFuzzyResult = $.inArray(result, fuzzyResults) == -1;\n\n              if (notResult && notFuzzyResult) {\n                array.push(result);\n              }\n            };\n\n            source = source || settings.source;\n            searchFields = searchFields !== undefined ? searchFields : settings.searchFields; // search fields should be array to loop correctly\n\n            if (!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            } // exit conditions if no source\n\n\n            if (source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            } // iterate through search fields looking for matches\n\n\n            $.each(searchFields, function (index, field) {\n              $.each(source, function (label, content) {\n                var fieldExists = typeof content[field] == 'string';\n\n                if (fieldExists) {\n                  if (content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  } else if (settings.searchFullText && module.fuzzySearch(searchTerm, content[field])) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            return $.merge(results, fuzzyResults);\n          }\n        },\n        fuzzySearch: function (query, term) {\n          var termLength = term.length,\n              queryLength = query.length;\n\n          if (typeof query !== 'string') {\n            return false;\n          }\n\n          query = query.toLowerCase();\n          term = term.toLowerCase();\n\n          if (queryLength > termLength) {\n            return false;\n          }\n\n          if (queryLength === termLength) {\n            return query === term;\n          }\n\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var queryCharacter = query.charCodeAt(characterIndex);\n\n            while (nextCharacterIndex < termLength) {\n              if (term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n\n            return false;\n          }\n\n          return true;\n        },\n        parse: {\n          response: function (response, searchTerm) {\n            var searchHTML = module.generateResults(response);\n            module.verbose('Parsing server response', response);\n\n            if (response !== undefined) {\n              if (searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html: searchHTML,\n                  results: response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n        cancel: {\n          query: function () {\n            if (module.can.useAPI()) {\n              $module.api('abort');\n            }\n          }\n        },\n        has: {\n          minimumCharacters: function () {\n            var searchTerm = module.get.value(),\n                numCharacters = searchTerm.length;\n            return numCharacters >= settings.minCharacters;\n          }\n        },\n        clear: {\n          cache: function (value) {\n            var cache = $module.data(metadata.cache);\n\n            if (!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            } else if (value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        read: {\n          cache: function (name) {\n            var cache = $module.data(metadata.cache);\n\n            if (settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (typeof cache === \"undefined\" ? \"undefined\" : (0, _typeof3.default)(cache)) == 'object' && cache[name] !== undefined ? cache[name] : false;\n            }\n\n            return false;\n          }\n        },\n        create: {\n          id: function (resultIndex, categoryIndex) {\n            var resultID = resultIndex + 1,\n                // not zero indexed\n            categoryID = categoryIndex + 1,\n                firstCharCode,\n                letterID,\n                id;\n\n            if (categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            } else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n\n            return id;\n          },\n          results: function () {\n            if ($results.length === 0) {\n              $results = $('<div />').addClass(className.results).appendTo($module);\n            }\n          }\n        },\n        inject: {\n          result: function (result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var $selectedResult = categoryIndex !== undefined ? $results.children().eq(categoryIndex).children(selector.result).eq(resultIndex) : $results.children(selector.result).eq(resultIndex);\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult.data(metadata.result, result);\n          },\n          id: function (results) {\n            module.debug('Injecting unique ids into results');\n            var // since results may be object, we must use counters\n            categoryIndex = 0,\n                resultIndex = 0;\n\n            if (settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function (index, category) {\n                resultIndex = 0;\n                $.each(category.results, function (index, value) {\n                  var result = category.results[index];\n\n                  if (result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            } else {\n              // top level\n              $.each(results, function (index, value) {\n                var result = results[index];\n\n                if (result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n\n            return results;\n          }\n        },\n        save: {\n          results: function (results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n        write: {\n          cache: function (name, value) {\n            var cache = $module.data(metadata.cache) !== undefined ? $module.data(metadata.cache) : {};\n\n            if (settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n        addResults: function (html) {\n          if ($.isFunction(settings.onResultsAdd)) {\n            if (settings.onResultsAdd.call($results, html) === false) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n\n          if (html) {\n            $results.html(html);\n            module.refreshResults();\n\n            if (settings.selectFirstResult) {\n              module.select.firstResult();\n            }\n\n            module.showResults();\n          } else {\n            module.hideResults();\n          }\n        },\n        showResults: function () {\n          if (!module.is.visible()) {\n            if (module.can.transition()) {\n              module.debug('Showing results with css animations');\n              $results.transition({\n                animation: settings.transition + ' in',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                queue: true\n              });\n            } else {\n              module.debug('Showing results with javascript');\n              $results.stop().fadeIn(settings.duration, settings.easing);\n            }\n\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function () {\n          if (module.is.visible()) {\n            if (module.can.transition()) {\n              module.debug('Hiding results with css animations');\n              $results.transition({\n                animation: settings.transition + ' out',\n                debug: settings.debug,\n                verbose: settings.verbose,\n                duration: settings.duration,\n                queue: true\n              });\n            } else {\n              module.debug('Hiding results with javascript');\n              $results.stop().fadeOut(settings.duration, settings.easing);\n            }\n\n            settings.onResultsClose.call($results);\n          }\n        },\n        generateResults: function (response) {\n          module.debug('Generating html from response', response);\n          var template = settings.templates[settings.type],\n              isProperObject = $.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results]),\n              isProperArray = $.isArray(response[fields.results]) && response[fields.results].length > 0,\n              html = '';\n\n          if (isProperObject || isProperArray) {\n            if (settings.maxResults > 0) {\n              if (isProperObject) {\n                if (settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              } else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n\n            if ($.isFunction(template)) {\n              html = template(response, fields);\n            } else {\n              module.error(error.noTemplate, false);\n            }\n          } else if (settings.showNoResults) {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n\n          settings.onResults.call(element, response);\n          return html;\n        },\n        displayMessage: function (text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults(settings.templates.message(text, type));\n          return settings.templates.message(text, type);\n        },\n        setting: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, settings, name);\n          } else if (value !== undefined) {\n            settings[name] = value;\n          } else {\n            return settings[name];\n          }\n        },\n        internal: function (name, value) {\n          if ($.isPlainObject(name)) {\n            $.extend(true, module, name);\n          } else if (value !== undefined) {\n            module[name] = value;\n          } else {\n            return module[name];\n          }\n        },\n        debug: function () {\n          if (!settings.silent && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function () {\n          if (!settings.silent && settings.verbose && settings.debug) {\n            if (settings.performance) {\n              module.performance.log(arguments);\n            } else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function () {\n          if (!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function (message) {\n            var currentTime, executionTime, previousTime;\n\n            if (settings.performance) {\n              currentTime = new Date().getTime();\n              previousTime = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time = currentTime;\n              performance.push({\n                'Name': message[0],\n                'Arguments': [].slice.call(message, 1) || '',\n                'Element': element,\n                'Execution Time': executionTime\n              });\n            }\n\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function () {\n            var title = settings.name + ':',\n                totalTime = 0;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function (index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n\n            if (moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n\n            if ($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n\n            if ((console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n\n              if (console.table) {\n                console.table(performance);\n              } else {\n                $.each(performance, function (index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time'] + 'ms');\n                });\n              }\n\n              console.groupEnd();\n            }\n\n            performance = [];\n          }\n        },\n        invoke: function (query, passedArguments, context) {\n          var object = instance,\n              maxDepth,\n              found,\n              response;\n          passedArguments = passedArguments || queryArguments;\n          context = element || context;\n\n          if (typeof query == 'string' && object !== undefined) {\n            query = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function (depth, value) {\n              var camelCaseValue = depth != maxDepth ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1) : query;\n\n              if ($.isPlainObject(object[camelCaseValue]) && depth != maxDepth) {\n                object = object[camelCaseValue];\n              } else if (object[camelCaseValue] !== undefined) {\n                found = object[camelCaseValue];\n                return false;\n              } else if ($.isPlainObject(object[value]) && depth != maxDepth) {\n                object = object[value];\n              } else if (object[value] !== undefined) {\n                found = object[value];\n                return false;\n              } else {\n                return false;\n              }\n            });\n          }\n\n          if ($.isFunction(found)) {\n            response = found.apply(context, passedArguments);\n          } else if (found !== undefined) {\n            response = found;\n          }\n\n          if ($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          } else if (returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          } else if (response !== undefined) {\n            returnedValue = response;\n          }\n\n          return found;\n        }\n      };\n\n      if (methodInvoked) {\n        if (instance === undefined) {\n          module.initialize();\n        }\n\n        module.invoke(query);\n      } else {\n        if (instance !== undefined) {\n          instance.invoke('destroy');\n        }\n\n        module.initialize();\n      }\n    });\n    return returnedValue !== undefined ? returnedValue : this;\n  };\n\n  $.fn.search.settings = {\n    name: 'Search',\n    namespace: 'search',\n    silent: false,\n    debug: false,\n    verbose: false,\n    performance: true,\n    // template to use (specified in settings.templates)\n    type: 'standard',\n    // minimum characters required to search\n    minCharacters: 1,\n    // whether to select first result after searching automatically\n    selectFirstResult: false,\n    // API config\n    apiSettings: false,\n    // object to search\n    source: false,\n    // fields to search\n    searchFields: ['title', 'description'],\n    // field to display in standard results template\n    displayField: '',\n    // whether to include fuzzy results in local search\n    searchFullText: true,\n    // whether to add events to prompt automatically\n    automatic: true,\n    // delay before hiding menu after blur\n    hideDelay: 0,\n    // delay before searching\n    searchDelay: 200,\n    // maximum results returned from local\n    maxResults: 7,\n    // whether to store lookups in local cache\n    cache: true,\n    // whether no results errors should be shown\n    showNoResults: true,\n    // transition settings\n    transition: 'scale',\n    duration: 200,\n    easing: 'easeOutExpo',\n    // callbacks\n    onSelect: false,\n    onResultsAdd: false,\n    onSearchQuery: function (query) {},\n    onResults: function (response) {},\n    onResultsOpen: function () {},\n    onResultsClose: function () {},\n    className: {\n      animating: 'animating',\n      active: 'active',\n      empty: 'empty',\n      focus: 'focus',\n      hidden: 'hidden',\n      loading: 'loading',\n      results: 'results',\n      pressed: 'down'\n    },\n    error: {\n      source: 'Cannot search. No source used, and Semantic API module was not included',\n      noResults: 'Your search returned no results',\n      logging: 'Error in debug logging, exiting.',\n      noEndpoint: 'No search endpoint was specified',\n      noTemplate: 'A valid template name was not specified.',\n      serverError: 'There was an issue querying the server.',\n      maxResults: 'Results must be an array to use maxResults setting',\n      method: 'The method you called is not defined.'\n    },\n    metadata: {\n      cache: 'cache',\n      results: 'results',\n      result: 'result'\n    },\n    regExp: {\n      escape: /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n      beginsWith: '(?:\\s|^)'\n    },\n    // maps api response attributes to internal representation\n    fields: {\n      categories: 'results',\n      // array of categories (category view)\n      categoryName: 'name',\n      // name of category (category view)\n      categoryResults: 'results',\n      // array of results (category view)\n      description: 'description',\n      // result description\n      image: 'image',\n      // result image\n      price: 'price',\n      // result price\n      results: 'results',\n      // array of results (standard)\n      title: 'title',\n      // result title\n      url: 'url',\n      // result url\n      action: 'action',\n      // \"view more\" object name\n      actionText: 'text',\n      // \"view more\" text\n      actionURL: 'url' // \"view more\" url\n\n    },\n    selector: {\n      prompt: '.prompt',\n      searchButton: '.search.button',\n      results: '.results',\n      message: '.results > .message',\n      category: '.category',\n      result: '.result',\n      title: '.title, .name'\n    },\n    templates: {\n      escape: function (string) {\n        var badChars = /[&<>\"'`]/g,\n            shouldEscape = /[&<>\"'`]/,\n            escape = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n            escapedChar = function (chr) {\n          return escape[chr];\n        };\n\n        if (shouldEscape.test(string)) {\n          return string.replace(badChars, escapedChar);\n        }\n\n        return string;\n      },\n      message: function (message, type) {\n        var html = '';\n\n        if (message !== undefined && type !== undefined) {\n          html += '' + '<div class=\"message ' + type + '\">'; // message type\n\n          if (type == 'empty') {\n            html += '' + '<div class=\"header\">No Results</div class=\"header\">' + '<div class=\"description\">' + message + '</div class=\"description\">';\n          } else {\n            html += ' <div class=\"description\">' + message + '</div>';\n          }\n\n          html += '</div>';\n        }\n\n        return html;\n      },\n      category: function (response, fields) {\n        var html = '',\n            escape = $.fn.search.settings.templates.escape;\n\n        if (response[fields.categoryResults] !== undefined) {\n          // each category\n          $.each(response[fields.categoryResults], function (index, category) {\n            if (category[fields.results] !== undefined && category.results.length > 0) {\n              html += '<div class=\"category\">';\n\n              if (category[fields.categoryName] !== undefined) {\n                html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n              } // each item inside category\n\n\n              $.each(category.results, function (index, result) {\n                if (result[fields.url]) {\n                  html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n                } else {\n                  html += '<a class=\"result\">';\n                }\n\n                if (result[fields.image] !== undefined) {\n                  html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n                }\n\n                html += '<div class=\"content\">';\n\n                if (result[fields.price] !== undefined) {\n                  html += '<div class=\"price\">' + result[fields.price] + '</div>';\n                }\n\n                if (result[fields.title] !== undefined) {\n                  html += '<div class=\"title\">' + result[fields.title] + '</div>';\n                }\n\n                if (result[fields.description] !== undefined) {\n                  html += '<div class=\"description\">' + result[fields.description] + '</div>';\n                }\n\n                html += '' + '</div>';\n                html += '</a>';\n              });\n              html += '' + '</div>';\n            }\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      },\n      standard: function (response, fields) {\n        var html = '';\n\n        if (response[fields.results] !== undefined) {\n          // each result\n          $.each(response[fields.results], function (index, result) {\n            if (result[fields.url]) {\n              html += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n            } else {\n              html += '<a class=\"result\">';\n            }\n\n            if (result[fields.image] !== undefined) {\n              html += '' + '<div class=\"image\">' + ' <img src=\"' + result[fields.image] + '\">' + '</div>';\n            }\n\n            html += '<div class=\"content\">';\n\n            if (result[fields.price] !== undefined) {\n              html += '<div class=\"price\">' + result[fields.price] + '</div>';\n            }\n\n            if (result[fields.title] !== undefined) {\n              html += '<div class=\"title\">' + result[fields.title] + '</div>';\n            }\n\n            if (result[fields.description] !== undefined) {\n              html += '<div class=\"description\">' + result[fields.description] + '</div>';\n            }\n\n            html += '' + '</div>';\n            html += '</a>';\n          });\n\n          if (response[fields.action]) {\n            html += '' + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">' + response[fields.action][fields.actionText] + '</a>';\n          }\n\n          return html;\n        }\n\n        return false;\n      }\n    }\n  };\n})(jQuery, window, document);","ast":null,"map":{"version":3,"sources":["/client/lib/semantic-ui/definitions/modules/search.js"],"names":["$","window","document","undefined","Math","self","Function","fn","search","parameters","$allModules","moduleSelector","selector","time","Date","getTime","performance","query","arguments","methodInvoked","queryArguments","slice","call","returnedValue","each","settings","isPlainObject","extend","className","metadata","regExp","fields","error","namespace","eventNamespace","moduleNamespace","$module","$prompt","find","prompt","$searchButton","searchButton","$results","results","$result","result","$category","category","element","instance","data","disabledBubbled","module","initialize","verbose","determine","searchFields","bind","events","set","type","create","instantiate","destroy","off","removeData","refresh","debug","refreshResults","automatic","on","get","inputEvent","event","input","attr","focus","blur","handleKeyboard","mousedown","mouseup","click","clearTimeout","timer","setTimeout","searchDelay","has","minimumCharacters","can","show","showResults","pageLostFocus","activeElement","callback","cancel","remove","hideResults","hideDelay","resultsClicked","one","is","inMessage","animating","hidden","$title","title","eq","$link","href","target","html","value","length","text","isFunction","onSelect","ctrlKey","open","location","currentIndex","index","filter","active","resultSize","keyCode","which","keys","backspace","enter","escape","upArrow","downArrow","newIndex","trigger","visible","preventDefault","removeClass","addClass","closest","buttonPressed","buttonFocus","setup","api","searchTerm","apiSettings","cache","action","urlData","onSuccess","response","parse","onAbort","onFailure","displayMessage","serverError","onError","searchHTML","useAPI","focused","empty","transition","hasClass","message","createEvent","promptElement","initEvent","dispatchEvent","oninput","onpropertychange","val","lookupFields","isArray","object","select","firstResult","first","loading","pressed","read","save","addResults","inject","id","source","local","remote","onSearchQuery","content","generateResults","write","fuzzyResults","searchExp","toString","replace","matchRegExp","RegExp","beginsWith","addResult","array","notResult","inArray","notFuzzyResult","push","field","label","fieldExists","searchFullText","fuzzySearch","merge","term","termLength","queryLength","toLowerCase","characterIndex","nextCharacterIndex","queryCharacter","charCodeAt","numCharacters","minCharacters","clear","name","resultIndex","categoryIndex","resultID","categoryID","firstCharCode","letterID","String","fromCharCode","appendTo","$selectedResult","children","onResultsAdd","selectFirstResult","animation","duration","queue","stop","fadeIn","easing","onResultsOpen","fadeOut","onResultsClose","template","templates","isProperObject","isEmptyObject","isProperArray","maxResults","noTemplate","showNoResults","noResults","onResults","setting","internal","silent","log","prototype","console","info","apply","currentTime","executionTime","previousTime","display","totalTime","group","table","groupCollapsed","groupEnd","invoke","passedArguments","context","maxDepth","found","split","depth","camelCaseValue","charAt","toUpperCase","displayField","logging","noEndpoint","method","categories","categoryName","categoryResults","description","image","price","url","actionText","actionURL","string","badChars","shouldEscape","escapedChar","chr","test","standard","jQuery"],"mappings":"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","file":"/client/lib/semantic-ui/definitions/modules/search.js.map","sourcesContent":["/*\n  DO NOT MODIFY - This file has been generated and will be regenerated\n  Semantic UI v2.2.1\n*/\n/*!\n * # Semantic UI - Search\n * http://github.com/semantic-org/semantic-ui/\n *\n *\n * Released under the MIT license\n * http://opensource.org/licenses/MIT\n *\n */\n\n;(function ($, window, document, undefined) {\n\n\"use strict\";\n\nwindow = (typeof window != 'undefined' && window.Math == Math)\n  ? window\n  : (typeof self != 'undefined' && self.Math == Math)\n    ? self\n    : Function('return this')()\n;\n\n$.fn.search = function(parameters) {\n  var\n    $allModules     = $(this),\n    moduleSelector  = $allModules.selector || '',\n\n    time            = new Date().getTime(),\n    performance     = [],\n\n    query           = arguments[0],\n    methodInvoked   = (typeof query == 'string'),\n    queryArguments  = [].slice.call(arguments, 1),\n    returnedValue\n  ;\n  $(this)\n    .each(function() {\n      var\n        settings          = ( $.isPlainObject(parameters) )\n          ? $.extend(true, {}, $.fn.search.settings, parameters)\n          : $.extend({}, $.fn.search.settings),\n\n        className       = settings.className,\n        metadata        = settings.metadata,\n        regExp          = settings.regExp,\n        fields          = settings.fields,\n        selector        = settings.selector,\n        error           = settings.error,\n        namespace       = settings.namespace,\n\n        eventNamespace  = '.' + namespace,\n        moduleNamespace = namespace + '-module',\n\n        $module         = $(this),\n        $prompt         = $module.find(selector.prompt),\n        $searchButton   = $module.find(selector.searchButton),\n        $results        = $module.find(selector.results),\n        $result         = $module.find(selector.result),\n        $category       = $module.find(selector.category),\n\n        element         = this,\n        instance        = $module.data(moduleNamespace),\n\n        disabledBubbled = false,\n\n        module\n      ;\n\n      module = {\n\n        initialize: function() {\n          module.verbose('Initializing module');\n          module.determine.searchFields();\n          module.bind.events();\n          module.set.type();\n          module.create.results();\n          module.instantiate();\n        },\n        instantiate: function() {\n          module.verbose('Storing instance of module', module);\n          instance = module;\n          $module\n            .data(moduleNamespace, module)\n          ;\n        },\n        destroy: function() {\n          module.verbose('Destroying instance');\n          $module\n            .off(eventNamespace)\n            .removeData(moduleNamespace)\n          ;\n        },\n\n        refresh: function() {\n          module.debug('Refreshing selector cache');\n          $prompt         = $module.find(selector.prompt);\n          $searchButton   = $module.find(selector.searchButton);\n          $category       = $module.find(selector.category);\n          $results        = $module.find(selector.results);\n          $result         = $module.find(selector.result);\n        },\n\n        refreshResults: function() {\n          $results = $module.find(selector.results);\n          $result  = $module.find(selector.result);\n        },\n\n        bind: {\n          events: function() {\n            module.verbose('Binding events to search');\n            if(settings.automatic) {\n              $module\n                .on(module.get.inputEvent() + eventNamespace, selector.prompt, module.event.input)\n              ;\n              $prompt\n                .attr('autocomplete', 'off')\n              ;\n            }\n            $module\n              // prompt\n              .on('focus'     + eventNamespace, selector.prompt, module.event.focus)\n              .on('blur'      + eventNamespace, selector.prompt, module.event.blur)\n              .on('keydown'   + eventNamespace, selector.prompt, module.handleKeyboard)\n              // search button\n              .on('click'     + eventNamespace, selector.searchButton, module.query)\n              // results\n              .on('mousedown' + eventNamespace, selector.results, module.event.result.mousedown)\n              .on('mouseup'   + eventNamespace, selector.results, module.event.result.mouseup)\n              .on('click'     + eventNamespace, selector.result,  module.event.result.click)\n            ;\n          }\n        },\n\n        determine: {\n          searchFields: function() {\n            // this makes sure $.extend does not add specified search fields to default fields\n            // this is the only setting which should not extend defaults\n            if(parameters && parameters.searchFields !== undefined) {\n              settings.searchFields = parameters.searchFields;\n            }\n          }\n        },\n\n        event: {\n          input: function() {\n            clearTimeout(module.timer);\n            module.timer = setTimeout(module.query, settings.searchDelay);\n          },\n          focus: function() {\n            module.set.focus();\n            if( module.has.minimumCharacters() ) {\n              module.query();\n              if( module.can.show() ) {\n                module.showResults();\n              }\n            }\n          },\n          blur: function(event) {\n            var\n              pageLostFocus = (document.activeElement === this),\n              callback      = function() {\n                module.cancel.query();\n                module.remove.focus();\n                module.timer = setTimeout(module.hideResults, settings.hideDelay);\n              }\n            ;\n            if(pageLostFocus) {\n              return;\n            }\n            if(module.resultsClicked) {\n              module.debug('Determining if user action caused search to close');\n              $module\n                .one('click.close' + eventNamespace, selector.results, function(event) {\n                  if(module.is.inMessage(event) || disabledBubbled) {\n                    $prompt.focus();\n                    return;\n                  }\n                  disabledBubbled = false;\n                  if( !module.is.animating() && !module.is.hidden()) {\n                    callback();\n                  }\n                })\n              ;\n            }\n            else {\n              module.debug('Input blurred without user action, closing results');\n              callback();\n            }\n          },\n          result: {\n            mousedown: function() {\n              module.resultsClicked = true;\n            },\n            mouseup: function() {\n              module.resultsClicked = false;\n            },\n            click: function(event) {\n              module.debug('Search result selected');\n              var\n                $result = $(this),\n                $title  = $result.find(selector.title).eq(0),\n                $link   = $result.is('a[href]')\n                  ? $result\n                  : $result.find('a[href]').eq(0),\n                href    = $link.attr('href')   || false,\n                target  = $link.attr('target') || false,\n                title   = $title.html(),\n                // title is used for result lookup\n                value   = ($title.length > 0)\n                  ? $title.text()\n                  : false,\n                results = module.get.results(),\n                result  = $result.data(metadata.result) || module.get.result(value, results),\n                returnedValue\n              ;\n              if( $.isFunction(settings.onSelect) ) {\n                if(settings.onSelect.call(element, result, results) === false) {\n                  module.debug('Custom onSelect callback cancelled default select action');\n                  disabledBubbled = true;\n                  return;\n                }\n              }\n              module.hideResults();\n              if(value) {\n                module.set.value(value);\n              }\n              if(href) {\n                module.verbose('Opening search link found in result', $link);\n                if(target == '_blank' || event.ctrlKey) {\n                  window.open(href);\n                }\n                else {\n                  window.location.href = (href);\n                }\n              }\n            }\n          }\n        },\n        handleKeyboard: function(event) {\n          var\n            // force selector refresh\n            $result      = $module.find(selector.result),\n            $category    = $module.find(selector.category),\n            currentIndex = $result.index( $result.filter('.' + className.active) ),\n            resultSize   = $result.length,\n\n            keyCode      = event.which,\n            keys         = {\n              backspace : 8,\n              enter     : 13,\n              escape    : 27,\n              upArrow   : 38,\n              downArrow : 40\n            },\n            newIndex\n          ;\n          // search shortcuts\n          if(keyCode == keys.escape) {\n            module.verbose('Escape key pressed, blurring search field');\n            module.trigger.blur();\n          }\n          if( module.is.visible() ) {\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, selecting active result');\n              if( $result.filter('.' + className.active).length > 0 ) {\n                module.event.result.click.call($result.filter('.' + className.active), event);\n                event.preventDefault();\n                return false;\n              }\n            }\n            else if(keyCode == keys.upArrow) {\n              module.verbose('Up key pressed, changing active result');\n              newIndex = (currentIndex - 1 < 0)\n                ? currentIndex\n                : currentIndex - 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n            else if(keyCode == keys.downArrow) {\n              module.verbose('Down key pressed, changing active result');\n              newIndex = (currentIndex + 1 >= resultSize)\n                ? currentIndex\n                : currentIndex + 1\n              ;\n              $category\n                .removeClass(className.active)\n              ;\n              $result\n                .removeClass(className.active)\n                .eq(newIndex)\n                  .addClass(className.active)\n                  .closest($category)\n                    .addClass(className.active)\n              ;\n              event.preventDefault();\n            }\n          }\n          else {\n            // query shortcuts\n            if(keyCode == keys.enter) {\n              module.verbose('Enter key pressed, executing query');\n              module.query();\n              module.set.buttonPressed();\n              $prompt.one('keyup', module.remove.buttonFocus);\n            }\n          }\n        },\n\n        setup: {\n          api: function(searchTerm) {\n            var\n              apiSettings = {\n                debug             : settings.debug,\n                on                : false,\n                cache             : true,\n                action            : 'search',\n                urlData           : {\n                  query : searchTerm\n                },\n                onSuccess         : function(response) {\n                  module.parse.response.call(element, response, searchTerm);\n                },\n                onAbort           : function(response) {\n                },\n                onFailure         : function() {\n                  module.displayMessage(error.serverError);\n                },\n                onError           : module.error\n              },\n              searchHTML\n            ;\n            $.extend(true, apiSettings, settings.apiSettings);\n            module.verbose('Setting up API request', apiSettings);\n            $module.api(apiSettings);\n          }\n        },\n\n        can: {\n          useAPI: function() {\n            return $.fn.api !== undefined;\n          },\n          show: function() {\n            return module.is.focused() && !module.is.visible() && !module.is.empty();\n          },\n          transition: function() {\n            return settings.transition && $.fn.transition !== undefined && $module.transition('is supported');\n          }\n        },\n\n        is: {\n          animating: function() {\n            return $results.hasClass(className.animating);\n          },\n          hidden: function() {\n            return $results.hasClass(className.hidden);\n          },\n          inMessage: function(event) {\n            return (event.target && $(event.target).closest(selector.message).length > 0);\n          },\n          empty: function() {\n            return ($results.html() === '');\n          },\n          visible: function() {\n            return ($results.filter(':visible').length > 0);\n          },\n          focused: function() {\n            return ($prompt.filter(':focus').length > 0);\n          }\n        },\n\n        trigger: {\n          blur: function() {\n            var\n              events        = document.createEvent('HTMLEvents'),\n              promptElement = $prompt[0]\n            ;\n            if(promptElement) {\n              module.verbose('Triggering native blur event');\n              events.initEvent('blur', false, false);\n              promptElement.dispatchEvent(events);\n            }\n          }\n        },\n\n        get: {\n          inputEvent: function() {\n            var\n              prompt = $prompt[0],\n              inputEvent   = (prompt !== undefined && prompt.oninput !== undefined)\n                ? 'input'\n                : (prompt !== undefined && prompt.onpropertychange !== undefined)\n                  ? 'propertychange'\n                  : 'keyup'\n            ;\n            return inputEvent;\n          },\n          value: function() {\n            return $prompt.val();\n          },\n          results: function() {\n            var\n              results = $module.data(metadata.results)\n            ;\n            return results;\n          },\n          result: function(value, results) {\n            var\n              lookupFields = ['title', 'id'],\n              result       = false\n            ;\n            value = (value !== undefined)\n              ? value\n              : module.get.value()\n            ;\n            results = (results !== undefined)\n              ? results\n              : module.get.results()\n            ;\n            if(settings.type === 'category') {\n              module.debug('Finding result that matches', value);\n              $.each(results, function(index, category) {\n                if($.isArray(category.results)) {\n                  result = module.search.object(value, category.results, lookupFields)[0];\n                  // don't continue searching if a result is found\n                  if(result) {\n                    return false;\n                  }\n                }\n              });\n            }\n            else {\n              module.debug('Finding result in results object', value);\n              result = module.search.object(value, results, lookupFields)[0];\n            }\n            return result || false;\n          },\n        },\n\n        select: {\n          firstResult: function() {\n            module.verbose('Selecting first result');\n            $result.first().addClass(className.active);\n          }\n        },\n\n        set: {\n          focus: function() {\n            $module.addClass(className.focus);\n          },\n          loading: function() {\n            $module.addClass(className.loading);\n          },\n          value: function(value) {\n            module.verbose('Setting search input value', value);\n            $prompt\n              .val(value)\n            ;\n          },\n          type: function(type) {\n            type = type || settings.type;\n            if(settings.type == 'category') {\n              $module.addClass(settings.type);\n            }\n          },\n          buttonPressed: function() {\n            $searchButton.addClass(className.pressed);\n          }\n        },\n\n        remove: {\n          loading: function() {\n            $module.removeClass(className.loading);\n          },\n          focus: function() {\n            $module.removeClass(className.focus);\n          },\n          buttonPressed: function() {\n            $searchButton.removeClass(className.pressed);\n          }\n        },\n\n        query: function() {\n          var\n            searchTerm = module.get.value(),\n            cache = module.read.cache(searchTerm)\n          ;\n          if( module.has.minimumCharacters() )  {\n            if(cache) {\n              module.debug('Reading result from cache', searchTerm);\n              module.save.results(cache.results);\n              module.addResults(cache.html);\n              module.inject.id(cache.results);\n            }\n            else {\n              module.debug('Querying for', searchTerm);\n              if($.isPlainObject(settings.source) || $.isArray(settings.source)) {\n                module.search.local(searchTerm);\n              }\n              else if( module.can.useAPI() ) {\n                module.search.remote(searchTerm);\n              }\n              else {\n                module.error(error.source);\n              }\n            }\n            settings.onSearchQuery.call(element, searchTerm);\n          }\n          else {\n            module.hideResults();\n          }\n        },\n\n        search: {\n          local: function(searchTerm) {\n            var\n              results = module.search.object(searchTerm, settings.content),\n              searchHTML\n            ;\n            module.set.loading();\n            module.save.results(results);\n            module.debug('Returned local search results', results);\n\n            searchHTML = module.generateResults({\n              results: results\n            });\n            module.remove.loading();\n            module.addResults(searchHTML);\n            module.inject.id(results);\n            module.write.cache(searchTerm, {\n              html    : searchHTML,\n              results : results\n            });\n          },\n          remote: function(searchTerm) {\n            if($module.api('is loading')) {\n              $module.api('abort');\n            }\n            module.setup.api(searchTerm);\n            $module\n              .api('query')\n            ;\n          },\n          object: function(searchTerm, source, searchFields) {\n            var\n              results      = [],\n              fuzzyResults = [],\n              searchExp    = searchTerm.toString().replace(regExp.escape, '\\\\$&'),\n              matchRegExp  = new RegExp(regExp.beginsWith + searchExp, 'i'),\n\n              // avoid duplicates when pushing results\n              addResult = function(array, result) {\n                var\n                  notResult      = ($.inArray(result, results) == -1),\n                  notFuzzyResult = ($.inArray(result, fuzzyResults) == -1)\n                ;\n                if(notResult && notFuzzyResult) {\n                  array.push(result);\n                }\n              }\n            ;\n            source = source || settings.source;\n            searchFields = (searchFields !== undefined)\n              ? searchFields\n              : settings.searchFields\n            ;\n\n            // search fields should be array to loop correctly\n            if(!$.isArray(searchFields)) {\n              searchFields = [searchFields];\n            }\n\n            // exit conditions if no source\n            if(source === undefined || source === false) {\n              module.error(error.source);\n              return [];\n            }\n\n            // iterate through search fields looking for matches\n            $.each(searchFields, function(index, field) {\n              $.each(source, function(label, content) {\n                var\n                  fieldExists = (typeof content[field] == 'string')\n                ;\n                if(fieldExists) {\n                  if( content[field].search(matchRegExp) !== -1) {\n                    // content starts with value (first in results)\n                    addResult(results, content);\n                  }\n                  else if(settings.searchFullText && module.fuzzySearch(searchTerm, content[field]) ) {\n                    // content fuzzy matches (last in results)\n                    addResult(fuzzyResults, content);\n                  }\n                }\n              });\n            });\n            return $.merge(results, fuzzyResults);\n          }\n        },\n\n        fuzzySearch: function(query, term) {\n          var\n            termLength  = term.length,\n            queryLength = query.length\n          ;\n          if(typeof query !== 'string') {\n            return false;\n          }\n          query = query.toLowerCase();\n          term  = term.toLowerCase();\n          if(queryLength > termLength) {\n            return false;\n          }\n          if(queryLength === termLength) {\n            return (query === term);\n          }\n          search: for (var characterIndex = 0, nextCharacterIndex = 0; characterIndex < queryLength; characterIndex++) {\n            var\n              queryCharacter = query.charCodeAt(characterIndex)\n            ;\n            while(nextCharacterIndex < termLength) {\n              if(term.charCodeAt(nextCharacterIndex++) === queryCharacter) {\n                continue search;\n              }\n            }\n            return false;\n          }\n          return true;\n        },\n\n        parse: {\n          response: function(response, searchTerm) {\n            var\n              searchHTML = module.generateResults(response)\n            ;\n            module.verbose('Parsing server response', response);\n            if(response !== undefined) {\n              if(searchTerm !== undefined && response[fields.results] !== undefined) {\n                module.addResults(searchHTML);\n                module.inject.id(response[fields.results]);\n                module.write.cache(searchTerm, {\n                  html    : searchHTML,\n                  results : response[fields.results]\n                });\n                module.save.results(response[fields.results]);\n              }\n            }\n          }\n        },\n\n        cancel: {\n          query: function() {\n            if( module.can.useAPI() ) {\n              $module.api('abort');\n            }\n          }\n        },\n\n        has: {\n          minimumCharacters: function() {\n            var\n              searchTerm    = module.get.value(),\n              numCharacters = searchTerm.length\n            ;\n            return (numCharacters >= settings.minCharacters);\n          }\n        },\n\n        clear: {\n          cache: function(value) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(!value) {\n              module.debug('Clearing cache', value);\n              $module.removeData(metadata.cache);\n            }\n            else if(value && cache && cache[value]) {\n              module.debug('Removing value from cache', value);\n              delete cache[value];\n              $module.data(metadata.cache, cache);\n            }\n          }\n        },\n\n        read: {\n          cache: function(name) {\n            var\n              cache = $module.data(metadata.cache)\n            ;\n            if(settings.cache) {\n              module.verbose('Checking cache for generated html for query', name);\n              return (typeof cache == 'object') && (cache[name] !== undefined)\n                ? cache[name]\n                : false\n              ;\n            }\n            return false;\n          }\n        },\n\n        create: {\n          id: function(resultIndex, categoryIndex) {\n            var\n              resultID      = (resultIndex + 1), // not zero indexed\n              categoryID    = (categoryIndex + 1),\n              firstCharCode,\n              letterID,\n              id\n            ;\n            if(categoryIndex !== undefined) {\n              // start char code for \"A\"\n              letterID = String.fromCharCode(97 + categoryIndex);\n              id          = letterID + resultID;\n              module.verbose('Creating category result id', id);\n            }\n            else {\n              id = resultID;\n              module.verbose('Creating result id', id);\n            }\n            return id;\n          },\n          results: function() {\n            if($results.length === 0) {\n              $results = $('<div />')\n                .addClass(className.results)\n                .appendTo($module)\n              ;\n            }\n          }\n        },\n\n        inject: {\n          result: function(result, resultIndex, categoryIndex) {\n            module.verbose('Injecting result into results');\n            var\n              $selectedResult = (categoryIndex !== undefined)\n                ? $results\n                    .children().eq(categoryIndex)\n                      .children(selector.result).eq(resultIndex)\n                : $results\n                    .children(selector.result).eq(resultIndex)\n            ;\n            module.verbose('Injecting results metadata', $selectedResult);\n            $selectedResult\n              .data(metadata.result, result)\n            ;\n          },\n          id: function(results) {\n            module.debug('Injecting unique ids into results');\n            var\n              // since results may be object, we must use counters\n              categoryIndex = 0,\n              resultIndex   = 0\n            ;\n            if(settings.type === 'category') {\n              // iterate through each category result\n              $.each(results, function(index, category) {\n                resultIndex = 0;\n                $.each(category.results, function(index, value) {\n                  var\n                    result = category.results[index]\n                  ;\n                  if(result.id === undefined) {\n                    result.id = module.create.id(resultIndex, categoryIndex);\n                  }\n                  module.inject.result(result, resultIndex, categoryIndex);\n                  resultIndex++;\n                });\n                categoryIndex++;\n              });\n            }\n            else {\n              // top level\n              $.each(results, function(index, value) {\n                var\n                  result = results[index]\n                ;\n                if(result.id === undefined) {\n                  result.id = module.create.id(resultIndex);\n                }\n                module.inject.result(result, resultIndex);\n                resultIndex++;\n              });\n            }\n            return results;\n          }\n        },\n\n        save: {\n          results: function(results) {\n            module.verbose('Saving current search results to metadata', results);\n            $module.data(metadata.results, results);\n          }\n        },\n\n        write: {\n          cache: function(name, value) {\n            var\n              cache = ($module.data(metadata.cache) !== undefined)\n                ? $module.data(metadata.cache)\n                : {}\n            ;\n            if(settings.cache) {\n              module.verbose('Writing generated html to cache', name, value);\n              cache[name] = value;\n              $module\n                .data(metadata.cache, cache)\n              ;\n            }\n          }\n        },\n\n        addResults: function(html) {\n          if( $.isFunction(settings.onResultsAdd) ) {\n            if( settings.onResultsAdd.call($results, html) === false ) {\n              module.debug('onResultsAdd callback cancelled default action');\n              return false;\n            }\n          }\n          if(html) {\n            $results\n              .html(html)\n            ;\n            module.refreshResults();\n            if(settings.selectFirstResult) {\n              module.select.firstResult();\n            }\n            module.showResults();\n          }\n          else {\n            module.hideResults();\n          }\n        },\n\n        showResults: function() {\n          if(!module.is.visible()) {\n            if( module.can.transition() ) {\n              module.debug('Showing results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' in',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Showing results with javascript');\n              $results\n                .stop()\n                .fadeIn(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsOpen.call($results);\n          }\n        },\n        hideResults: function() {\n          if( module.is.visible() ) {\n            if( module.can.transition() ) {\n              module.debug('Hiding results with css animations');\n              $results\n                .transition({\n                  animation  : settings.transition + ' out',\n                  debug      : settings.debug,\n                  verbose    : settings.verbose,\n                  duration   : settings.duration,\n                  queue      : true\n                })\n              ;\n            }\n            else {\n              module.debug('Hiding results with javascript');\n              $results\n                .stop()\n                .fadeOut(settings.duration, settings.easing)\n              ;\n            }\n            settings.onResultsClose.call($results);\n          }\n        },\n\n        generateResults: function(response) {\n          module.debug('Generating html from response', response);\n          var\n            template       = settings.templates[settings.type],\n            isProperObject = ($.isPlainObject(response[fields.results]) && !$.isEmptyObject(response[fields.results])),\n            isProperArray  = ($.isArray(response[fields.results]) && response[fields.results].length > 0),\n            html           = ''\n          ;\n          if(isProperObject || isProperArray ) {\n            if(settings.maxResults > 0) {\n              if(isProperObject) {\n                if(settings.type == 'standard') {\n                  module.error(error.maxResults);\n                }\n              }\n              else {\n                response[fields.results] = response[fields.results].slice(0, settings.maxResults);\n              }\n            }\n            if($.isFunction(template)) {\n              html = template(response, fields);\n            }\n            else {\n              module.error(error.noTemplate, false);\n            }\n          }\n          else if(settings.showNoResults) {\n            html = module.displayMessage(error.noResults, 'empty');\n          }\n          settings.onResults.call(element, response);\n          return html;\n        },\n\n        displayMessage: function(text, type) {\n          type = type || 'standard';\n          module.debug('Displaying message', text, type);\n          module.addResults( settings.templates.message(text, type) );\n          return settings.templates.message(text, type);\n        },\n\n        setting: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, settings, name);\n          }\n          else if(value !== undefined) {\n            settings[name] = value;\n          }\n          else {\n            return settings[name];\n          }\n        },\n        internal: function(name, value) {\n          if( $.isPlainObject(name) ) {\n            $.extend(true, module, name);\n          }\n          else if(value !== undefined) {\n            module[name] = value;\n          }\n          else {\n            return module[name];\n          }\n        },\n        debug: function() {\n          if(!settings.silent && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.debug = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.debug.apply(console, arguments);\n            }\n          }\n        },\n        verbose: function() {\n          if(!settings.silent && settings.verbose && settings.debug) {\n            if(settings.performance) {\n              module.performance.log(arguments);\n            }\n            else {\n              module.verbose = Function.prototype.bind.call(console.info, console, settings.name + ':');\n              module.verbose.apply(console, arguments);\n            }\n          }\n        },\n        error: function() {\n          if(!settings.silent) {\n            module.error = Function.prototype.bind.call(console.error, console, settings.name + ':');\n            module.error.apply(console, arguments);\n          }\n        },\n        performance: {\n          log: function(message) {\n            var\n              currentTime,\n              executionTime,\n              previousTime\n            ;\n            if(settings.performance) {\n              currentTime   = new Date().getTime();\n              previousTime  = time || currentTime;\n              executionTime = currentTime - previousTime;\n              time          = currentTime;\n              performance.push({\n                'Name'           : message[0],\n                'Arguments'      : [].slice.call(message, 1) || '',\n                'Element'        : element,\n                'Execution Time' : executionTime\n              });\n            }\n            clearTimeout(module.performance.timer);\n            module.performance.timer = setTimeout(module.performance.display, 500);\n          },\n          display: function() {\n            var\n              title = settings.name + ':',\n              totalTime = 0\n            ;\n            time = false;\n            clearTimeout(module.performance.timer);\n            $.each(performance, function(index, data) {\n              totalTime += data['Execution Time'];\n            });\n            title += ' ' + totalTime + 'ms';\n            if(moduleSelector) {\n              title += ' \\'' + moduleSelector + '\\'';\n            }\n            if($allModules.length > 1) {\n              title += ' ' + '(' + $allModules.length + ')';\n            }\n            if( (console.group !== undefined || console.table !== undefined) && performance.length > 0) {\n              console.groupCollapsed(title);\n              if(console.table) {\n                console.table(performance);\n              }\n              else {\n                $.each(performance, function(index, data) {\n                  console.log(data['Name'] + ': ' + data['Execution Time']+'ms');\n                });\n              }\n              console.groupEnd();\n            }\n            performance = [];\n          }\n        },\n        invoke: function(query, passedArguments, context) {\n          var\n            object = instance,\n            maxDepth,\n            found,\n            response\n          ;\n          passedArguments = passedArguments || queryArguments;\n          context         = element         || context;\n          if(typeof query == 'string' && object !== undefined) {\n            query    = query.split(/[\\. ]/);\n            maxDepth = query.length - 1;\n            $.each(query, function(depth, value) {\n              var camelCaseValue = (depth != maxDepth)\n                ? value + query[depth + 1].charAt(0).toUpperCase() + query[depth + 1].slice(1)\n                : query\n              ;\n              if( $.isPlainObject( object[camelCaseValue] ) && (depth != maxDepth) ) {\n                object = object[camelCaseValue];\n              }\n              else if( object[camelCaseValue] !== undefined ) {\n                found = object[camelCaseValue];\n                return false;\n              }\n              else if( $.isPlainObject( object[value] ) && (depth != maxDepth) ) {\n                object = object[value];\n              }\n              else if( object[value] !== undefined ) {\n                found = object[value];\n                return false;\n              }\n              else {\n                return false;\n              }\n            });\n          }\n          if( $.isFunction( found ) ) {\n            response = found.apply(context, passedArguments);\n          }\n          else if(found !== undefined) {\n            response = found;\n          }\n          if($.isArray(returnedValue)) {\n            returnedValue.push(response);\n          }\n          else if(returnedValue !== undefined) {\n            returnedValue = [returnedValue, response];\n          }\n          else if(response !== undefined) {\n            returnedValue = response;\n          }\n          return found;\n        }\n      };\n      if(methodInvoked) {\n        if(instance === undefined) {\n          module.initialize();\n        }\n        module.invoke(query);\n      }\n      else {\n        if(instance !== undefined) {\n          instance.invoke('destroy');\n        }\n        module.initialize();\n      }\n\n    })\n  ;\n\n  return (returnedValue !== undefined)\n    ? returnedValue\n    : this\n  ;\n};\n\n$.fn.search.settings = {\n\n  name              : 'Search',\n  namespace         : 'search',\n\n  silent            : false,\n  debug             : false,\n  verbose           : false,\n  performance       : true,\n\n  // template to use (specified in settings.templates)\n  type              : 'standard',\n\n  // minimum characters required to search\n  minCharacters     : 1,\n\n  // whether to select first result after searching automatically\n  selectFirstResult : false,\n\n  // API config\n  apiSettings       : false,\n\n  // object to search\n  source            : false,\n\n  // fields to search\n  searchFields   : [\n    'title',\n    'description'\n  ],\n\n  // field to display in standard results template\n  displayField   : '',\n\n  // whether to include fuzzy results in local search\n  searchFullText : true,\n\n  // whether to add events to prompt automatically\n  automatic      : true,\n\n  // delay before hiding menu after blur\n  hideDelay      : 0,\n\n  // delay before searching\n  searchDelay    : 200,\n\n  // maximum results returned from local\n  maxResults     : 7,\n\n  // whether to store lookups in local cache\n  cache          : true,\n\n  // whether no results errors should be shown\n  showNoResults  : true,\n\n  // transition settings\n  transition     : 'scale',\n  duration       : 200,\n  easing         : 'easeOutExpo',\n\n  // callbacks\n  onSelect       : false,\n  onResultsAdd   : false,\n\n  onSearchQuery  : function(query){},\n  onResults      : function(response){},\n\n  onResultsOpen  : function(){},\n  onResultsClose : function(){},\n\n  className: {\n    animating : 'animating',\n    active    : 'active',\n    empty     : 'empty',\n    focus     : 'focus',\n    hidden    : 'hidden',\n    loading   : 'loading',\n    results   : 'results',\n    pressed   : 'down'\n  },\n\n  error : {\n    source      : 'Cannot search. No source used, and Semantic API module was not included',\n    noResults   : 'Your search returned no results',\n    logging     : 'Error in debug logging, exiting.',\n    noEndpoint  : 'No search endpoint was specified',\n    noTemplate  : 'A valid template name was not specified.',\n    serverError : 'There was an issue querying the server.',\n    maxResults  : 'Results must be an array to use maxResults setting',\n    method      : 'The method you called is not defined.'\n  },\n\n  metadata: {\n    cache   : 'cache',\n    results : 'results',\n    result  : 'result'\n  },\n\n  regExp: {\n    escape     : /[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g,\n    beginsWith : '(?:\\s|^)'\n  },\n\n  // maps api response attributes to internal representation\n  fields: {\n    categories      : 'results',     // array of categories (category view)\n    categoryName    : 'name',        // name of category (category view)\n    categoryResults : 'results',     // array of results (category view)\n    description     : 'description', // result description\n    image           : 'image',       // result image\n    price           : 'price',       // result price\n    results         : 'results',     // array of results (standard)\n    title           : 'title',       // result title\n    url             : 'url',         // result url\n    action          : 'action',      // \"view more\" object name\n    actionText      : 'text',        // \"view more\" text\n    actionURL       : 'url'          // \"view more\" url\n  },\n\n  selector : {\n    prompt       : '.prompt',\n    searchButton : '.search.button',\n    results      : '.results',\n    message      : '.results > .message',\n    category     : '.category',\n    result       : '.result',\n    title        : '.title, .name'\n  },\n\n  templates: {\n    escape: function(string) {\n      var\n        badChars     = /[&<>\"'`]/g,\n        shouldEscape = /[&<>\"'`]/,\n        escape       = {\n          \"&\": \"&amp;\",\n          \"<\": \"&lt;\",\n          \">\": \"&gt;\",\n          '\"': \"&quot;\",\n          \"'\": \"&#x27;\",\n          \"`\": \"&#x60;\"\n        },\n        escapedChar  = function(chr) {\n          return escape[chr];\n        }\n      ;\n      if(shouldEscape.test(string)) {\n        return string.replace(badChars, escapedChar);\n      }\n      return string;\n    },\n    message: function(message, type) {\n      var\n        html = ''\n      ;\n      if(message !== undefined && type !== undefined) {\n        html +=  ''\n          + '<div class=\"message ' + type + '\">'\n        ;\n        // message type\n        if(type == 'empty') {\n          html += ''\n            + '<div class=\"header\">No Results</div class=\"header\">'\n            + '<div class=\"description\">' + message + '</div class=\"description\">'\n          ;\n        }\n        else {\n          html += ' <div class=\"description\">' + message + '</div>';\n        }\n        html += '</div>';\n      }\n      return html;\n    },\n    category: function(response, fields) {\n      var\n        html = '',\n        escape = $.fn.search.settings.templates.escape\n      ;\n      if(response[fields.categoryResults] !== undefined) {\n\n        // each category\n        $.each(response[fields.categoryResults], function(index, category) {\n          if(category[fields.results] !== undefined && category.results.length > 0) {\n\n            html  += '<div class=\"category\">';\n\n            if(category[fields.categoryName] !== undefined) {\n              html += '<div class=\"name\">' + category[fields.categoryName] + '</div>';\n            }\n\n            // each item inside category\n            $.each(category.results, function(index, result) {\n              if(result[fields.url]) {\n                html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n              }\n              else {\n                html  += '<a class=\"result\">';\n              }\n              if(result[fields.image] !== undefined) {\n                html += ''\n                  + '<div class=\"image\">'\n                  + ' <img src=\"' + result[fields.image] + '\">'\n                  + '</div>'\n                ;\n              }\n              html += '<div class=\"content\">';\n              if(result[fields.price] !== undefined) {\n                html += '<div class=\"price\">' + result[fields.price] + '</div>';\n              }\n              if(result[fields.title] !== undefined) {\n                html += '<div class=\"title\">' + result[fields.title] + '</div>';\n              }\n              if(result[fields.description] !== undefined) {\n                html += '<div class=\"description\">' + result[fields.description] + '</div>';\n              }\n              html  += ''\n                + '</div>'\n              ;\n              html += '</a>';\n            });\n            html  += ''\n              + '</div>'\n            ;\n          }\n        });\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    },\n    standard: function(response, fields) {\n      var\n        html = ''\n      ;\n      if(response[fields.results] !== undefined) {\n\n        // each result\n        $.each(response[fields.results], function(index, result) {\n          if(result[fields.url]) {\n            html  += '<a class=\"result\" href=\"' + result[fields.url] + '\">';\n          }\n          else {\n            html  += '<a class=\"result\">';\n          }\n          if(result[fields.image] !== undefined) {\n            html += ''\n              + '<div class=\"image\">'\n              + ' <img src=\"' + result[fields.image] + '\">'\n              + '</div>'\n            ;\n          }\n          html += '<div class=\"content\">';\n          if(result[fields.price] !== undefined) {\n            html += '<div class=\"price\">' + result[fields.price] + '</div>';\n          }\n          if(result[fields.title] !== undefined) {\n            html += '<div class=\"title\">' + result[fields.title] + '</div>';\n          }\n          if(result[fields.description] !== undefined) {\n            html += '<div class=\"description\">' + result[fields.description] + '</div>';\n          }\n          html  += ''\n            + '</div>'\n          ;\n          html += '</a>';\n        });\n\n        if(response[fields.action]) {\n          html += ''\n          + '<a href=\"' + response[fields.action][fields.actionURL] + '\" class=\"action\">'\n          +   response[fields.action][fields.actionText]\n          + '</a>';\n        }\n        return html;\n      }\n      return false;\n    }\n  }\n};\n\n})( jQuery, window, document );\n"]},"hash":"ec377f7ea0a3c455ad24e208a97d4b90f7b5d95f"}
